
> temp@0.1.0 lint
> eslint --format json

[{"filePath":"/home/xibalbasolutions/NextivaClone/eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/playwright.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/prisma.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/prisma/seed.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1,"column":26,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1,"endColumn":51},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":2,"column":33,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":2,"endColumn":74},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":3,"column":23,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":3,"endColumn":48}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { PrismaClient } = require('@prisma/client');\nconst { PrismaBetterSqlite3 } = require('@prisma/adapter-better-sqlite3');\nconst BetterSqlite3 = require('better-sqlite3');\n\nconst db = new BetterSqlite3('prisma/dev.db');\nconst adapter = new PrismaBetterSqlite3(db);\nconst prisma = new PrismaClient({ adapter });\n\nasync function main() {\n    const org = await prisma.organization.upsert({\n        where: { domain: 'nextiva-clone.io' },\n        update: {},\n        create: {\n            name: 'Nextiva Clone Org',\n            domain: 'nextiva-clone.io',\n        }\n    });\n\n    const user = await prisma.user.upsert({\n        where: { email: 'demo@example.com' },\n        update: {\n            organizationId: org.id,\n            role: 'ADMIN',\n        },\n        create: {\n            email: 'demo@example.com',\n            name: 'Demo Admin',\n            role: 'ADMIN',\n            organizationId: org.id,\n        },\n    });\n\n    const contacts = [\n        { firstName: 'John', lastName: 'Doe', email: 'john@example.com', phone: '555-0101', company: 'Tech Corp', status: 'CUSTOMER' },\n        { firstName: 'Jane', lastName: 'Smith', email: 'jane@smith.io', phone: '555-0102', company: 'Innovation Inc', status: 'LEAD' },\n    ];\n\n    for (const c of contacts) {\n        const contact = await prisma.contact.create({\n            data: {\n                ...c,\n                userId: user.id,\n                organizationId: org.id,\n                deals: {\n                    create: [\n                        { title: `${c.company} Expansion`, value: Math.floor(Math.random() * 50000) + 5000, stage: 'QUALIFICATION' }\n                    ]\n                },\n                tasks: {\n                    create: [\n                        { title: `Follow up with ${c.firstName}`, status: 'OPEN', priority: 'HIGH', userId: user.id }\n                    ]\n                }\n            }\n        });\n\n        await prisma.activity.create({\n            data: {\n                type: 'NOTE',\n                content: `Initial contact made with ${c.firstName} from ${c.company}`,\n                userId: user.id,\n                contactId: contact.id\n            }\n        });\n    }\n\n    console.log('Seed completed successfully');\n}\n\nmain()\n    .catch((e) => {\n        console.error(e);\n        process.exit(1);\n    })\n    .finally(async () => {\n        await prisma.$disconnect();\n    });\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/prisma/seed_direct.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1,"column":23,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1,"endColumn":48},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'crypto' is assigned a value but never used.","line":2,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":15},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":2,"column":20,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":2,"endColumn":37}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const BetterSqlite3 = require('better-sqlite3');\nconst { crypto } = require('crypto');\n\nasync function seed() {\n    const db = new BetterSqlite3('prisma/dev.db');\n\n    try {\n        // Create Organization\n        const orgId = 'org_' + Math.random().toString(36).substr(2, 9);\n        db.prepare('INSERT OR IGNORE INTO Organization (id, name, domain, createdAt, updatedAt) VALUES (?, ?, ?, ?, ?)').run(\n            orgId, 'Nextiva Clone Org', 'nextiva-clone.io', new Date().toISOString(), new Date().toISOString()\n        );\n\n        // Find or Create Org (since IGNORE might match existing)\n        const org = db.prepare('SELECT id FROM Organization WHERE domain = ?').get('nextiva-clone.io');\n\n        // Create User\n        const userId = 'user_demo';\n        db.prepare(`\n            INSERT OR REPLACE INTO User (id, email, name, role, organizationId, createdAt, updatedAt) \n            VALUES (?, ?, ?, ?, ?, ?, ?)\n        `).run(\n            userId, 'demo@example.com', 'Demo Admin', 'ADMIN', org.id, new Date().toISOString(), new Date().toISOString()\n        );\n\n        // Clear existing contacts for demo\n        db.prepare('DELETE FROM Contact WHERE userId = ?').run(userId);\n\n        // Create Contacts\n        const contacts = [\n            { id: 'c1', firstName: 'John', lastName: 'Doe', email: 'john@example.com', phone: '555-0101', company: 'Tech Corp', status: 'CUSTOMER' },\n            { id: 'c2', firstName: 'Jane', lastName: 'Smith', email: 'jane@smith.io', phone: '555-0102', company: 'Innovation Inc', status: 'LEAD' },\n        ];\n\n        for (const c of contacts) {\n            db.prepare(`\n                INSERT INTO Contact (id, firstName, lastName, email, phone, company, status, userId, organizationId, createdAt, updatedAt)\n                VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n            `).run(\n                c.id, c.firstName, c.lastName, c.email, c.phone, c.company, c.status, userId, org.id, new Date().toISOString(), new Date().toISOString()\n            );\n\n            // Create Deal\n            db.prepare(`\n                INSERT INTO Deal (id, title, value, stage, contactId, createdAt, updatedAt)\n                VALUES (?, ?, ?, ?, ?, ?, ?)\n            `).run(\n                'deal_' + c.id, `${c.company} Expansion`, 25000, 'QUALIFICATION', c.id, new Date().toISOString(), new Date().toISOString()\n            );\n\n            // Create Task\n            db.prepare(`\n                INSERT INTO Task (id, title, status, priority, userId, contactId, createdAt, updatedAt)\n                VALUES (?, ?, ?, ?, ?, ?, ?, ?)\n            `).run(\n                'task_' + c.id, `Follow up with ${c.firstName}`, 'OPEN', 'HIGH', userId, c.id, new Date().toISOString(), new Date().toISOString()\n            );\n\n            // Create Activity\n            db.prepare(`\n                INSERT INTO Activity (id, type, content, userId, contactId, createdAt)\n                VALUES (?, ?, ?, ?, ?, ?)\n            `).run(\n                'act_' + c.id, 'NOTE', `Initial contact made with ${c.firstName} from ${c.company}`, userId, c.id, new Date().toISOString()\n            );\n        }\n\n        console.log('Direct seed completed successfully via better-sqlite3');\n    } catch (error) {\n        console.error('Seed Error:', error);\n    } finally {\n        db.close();\n    }\n}\n\nseed();\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/app/api/chat/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/app/dashboard/admin/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Users' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Shield' is defined but never used.","line":5,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Mail' is defined but never used.","line":5,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":39},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[290,293],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[290,293],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { getOrganizationUsers, createUserAction } from '@/lib/actions/admin';\nimport { Users, UserPlus, Shield, Mail } from 'lucide-react';\n\nexport default function AdminDashboard() {\n    const [users, setUsers] = useState<any[]>([]);\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        loadUsers();\n    }, []);\n\n    async function loadUsers() {\n        try {\n            const data = await getOrganizationUsers();\n            setUsers(data);\n        } catch (error) {\n            console.error(error);\n        } finally {\n            setLoading(false);\n        }\n    }\n\n    return (\n        <div className=\"fade-in\">\n            <div style={{ marginBottom: '2.5rem', display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\n                <div>\n                    <h1 style={{ fontSize: '2rem', marginBottom: '0.5rem' }}>Organization Admin</h1>\n                    <p style={{ color: 'var(--text-muted)' }}>Manage users and settings for your organization.</p>\n                </div>\n                <button\n                    onClick={() => setIsModalOpen(true)}\n                    className=\"btn-primary\"\n                    style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}\n                >\n                    <UserPlus size={16} /> Add User\n                </button>\n            </div>\n\n            <div className=\"glass\" style={{ padding: '1.5rem' }}>\n                <h3 style={{ fontSize: '1.25rem', marginBottom: '1.5rem', fontWeight: '600' }}>Users</h3>\n                {loading ? (\n                    <div>Loading...</div>\n                ) : (\n                    <table style={{ width: '100%', borderCollapse: 'collapse' }}>\n                        <thead>\n                            <tr style={{ borderBottom: '1px solid var(--glass-border)', textAlign: 'left' }}>\n                                <th style={{ padding: '0.75rem', color: 'var(--text-muted)' }}>Name</th>\n                                <th style={{ padding: '0.75rem', color: 'var(--text-muted)' }}>Email</th>\n                                <th style={{ padding: '0.75rem', color: 'var(--text-muted)' }}>Role</th>\n                                <th style={{ padding: '0.75rem', color: 'var(--text-muted)' }}>Status</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {users.map(user => (\n                                <tr key={user.id} style={{ borderBottom: '1px solid var(--glass-border)' }}>\n                                    <td style={{ padding: '0.75rem', display: 'flex', alignItems: 'center', gap: '0.75rem' }}>\n                                        <div style={{ width: '32px', height: '32px', borderRadius: '16px', background: 'rgba(255,255,255,0.1)', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n                                            {user.name?.[0] || '?'}\n                                        </div>\n                                        {user.name || 'N/A'}\n                                    </td>\n                                    <td style={{ padding: '0.75rem' }}>{user.email}</td>\n                                    <td style={{ padding: '0.75rem' }}>\n                                        <span style={{\n                                            padding: '0.25rem 0.75rem',\n                                            borderRadius: '999px',\n                                            fontSize: '0.75rem',\n                                            background: user.role === 'ADMIN' ? 'rgba(236, 72, 153, 0.1)' : 'rgba(59, 130, 246, 0.1)',\n                                            color: user.role === 'ADMIN' ? 'var(--secondary)' : 'var(--primary)'\n                                        }}>\n                                            {user.role}\n                                        </span>\n                                    </td>\n                                    <td style={{ padding: '0.75rem' }}>\n                                        <span style={{ color: 'var(--success)' }}>Active</span>\n                                    </td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                )}\n            </div>\n\n            {isModalOpen && (\n                <div style={{\n                    position: 'fixed', inset: 0, background: 'rgba(0,0,0,0.6)', backdropFilter: 'blur(4px)',\n                    display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 1000\n                }}>\n                    <div className=\"glass\" style={{ width: '400px', padding: '2rem' }}>\n                        <h2 style={{ marginBottom: '1.5rem', fontSize: '1.5rem' }}>Add New User</h2>\n                        <form action={async (formData) => {\n                            await createUserAction(formData);\n                            setIsModalOpen(false);\n                            loadUsers();\n                        }}>\n                            <div style={{ marginBottom: '1rem' }}>\n                                <label style={{ display: 'block', marginBottom: '0.5rem', fontSize: '0.9rem' }}>Full Name</label>\n                                <input name=\"name\" type=\"text\" className=\"glass\" style={{ width: '100%', padding: '0.75rem' }} required placeholder=\"e.g. Jane Doe\" />\n                            </div>\n                            <div style={{ marginBottom: '1rem' }}>\n                                <label style={{ display: 'block', marginBottom: '0.5rem', fontSize: '0.9rem' }}>Email</label>\n                                <input name=\"email\" type=\"email\" className=\"glass\" style={{ width: '100%', padding: '0.75rem' }} required placeholder=\"jane@company.com\" />\n                            </div>\n                            <div style={{ marginBottom: '1.5rem' }}>\n                                <label style={{ display: 'block', marginBottom: '0.5rem', fontSize: '0.9rem' }}>Role</label>\n                                <select name=\"role\" className=\"glass\" style={{ width: '100%', padding: '0.75rem' }}>\n                                    <option value=\"USER\" style={{ color: 'black' }}>User</option>\n                                    <option value=\"ADMIN\" style={{ color: 'black' }}>Admin</option>\n                                </select>\n                            </div>\n                            <div style={{ display: 'flex', gap: '1rem', justifyContent: 'flex-end' }}>\n                                <button type=\"button\" onClick={() => setIsModalOpen(false)} style={{ padding: '0.75rem 1.5rem', background: 'transparent', color: 'var(--text-muted)', border: 'none', cursor: 'pointer' }}>Cancel</button>\n                                <button type=\"submit\" className=\"btn-primary\">Create User</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/app/dashboard/ai/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/app/dashboard/audit/[clientId]/page.tsx","messages":[{"ruleId":"@next/next/no-html-link-for-pages","severity":2,"message":"Do not use an `<a>` element to navigate to `/dashboard/audit/`. Use `<Link />` from `next/link` instead. See: https://nextjs.org/docs/messages/no-html-link-for-pages","line":28,"column":17,"nodeType":"JSXOpeningElement","endLine":28,"endColumn":157},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":138,"column":95,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":138,"endColumn":98,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9265,9268],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9265,9268],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { getAuditData } from '@/lib/actions/audit';\nimport PrintButton from '@/components/audit/PrintButton';\n\nexport default async function AuditPacketPage({\n    params,\n    searchParams\n}: {\n    params: Promise<{ clientId: string }>,\n    searchParams: Promise<{ start?: string, end?: string }>\n}) {\n    const { clientId } = await params;\n    const { start, end } = await searchParams;\n\n    // Default to last 30 days if no range provided\n    const startDate = start || new Date(new Date().setDate(new Date().getDate() - 30)).toISOString().split('T')[0];\n    const endDate = end || new Date().toISOString().split('T')[0];\n\n    const data = await getAuditData(clientId, startDate, endDate);\n    const { client, period, auditorInfo, generatedAt } = data;\n\n    if (!client) return <div style={{ padding: '2rem' }}>Client not found</div>;\n\n    return (\n        <div style={{ padding: '2rem', maxWidth: '1000px', margin: '0 auto' }}>\n            {/* Back to list - Hidden on print */}\n            <div className=\"no-print\" style={{ marginBottom: '1rem' }}>\n                <a href=\"/dashboard/audit\" style={{ color: 'var(--accent)', textDecoration: 'none', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n                    ‚Üê Back to Audit Vault\n                </a>\n            </div>\n\n            <div className=\"audit-packet fade-in\" style={{\n                padding: '40px',\n                background: 'white',\n                color: '#333',\n                minHeight: '100vh',\n                borderRadius: '8px',\n                boxShadow: '0 10px 30px rgba(0,0,0,0.1)',\n                fontFamily: '\"Times New Roman\", Times, serif'\n            }}>\n                {/* Header */}\n                <div style={{ display: 'flex', justifyContent: 'space-between', borderBottom: '2px solid #000', paddingBottom: '20px', marginBottom: '30px' }}>\n                    <div>\n                        <h1 style={{ margin: 0, fontSize: '24px', color: '#000' }}>WISCONSIN T1019 AUDIT PACKET</h1>\n                        <p style={{ margin: '5px 0', fontSize: '14px', color: '#666' }}>Personal Care Services Verification Module</p>\n                    </div>\n                    <div style={{ textAlign: 'right' }}>\n                        <p style={{ margin: 0, fontWeight: 'bold', fontSize: '16px' }}>{auditorInfo.agencyName}</p>\n                        <p style={{ margin: 0, fontSize: '14px' }}>Provider ID: {auditorInfo.agencyId}</p>\n                        <p style={{ margin: '5px 0 0 0', fontSize: '12px' }}>Generated: {generatedAt.toLocaleString()}</p>\n                    </div>\n                </div>\n\n                {/* Client & Period Info */}\n                <div style={{ marginBottom: '40px', background: '#f9f9f9', padding: '20px', borderRadius: '4px', border: '1px solid #eee' }}>\n                    <h3 style={{ margin: '0 0 15px 0', borderBottom: '1px solid #ddd', paddingBottom: '5px', fontSize: '18px' }}>Client & Audit Context</h3>\n                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px' }}>\n                        <div>\n                            <p style={{ margin: '5px 0' }}><strong>Name:</strong> {client.firstName} {client.lastName}</p>\n                            <p style={{ margin: '5px 0' }}><strong>DOB:</strong> {client.dateOfBirth ? new Date(client.dateOfBirth).toLocaleDateString() : 'N/A'}</p>\n                            <p style={{ margin: '5px 0' }}><strong>Medicaid ID:</strong> {client.medicaidId || 'N/A'}</p>\n                        </div>\n                        <div>\n                            <p style={{ margin: '5px 0' }}><strong>Audit Period:</strong> {period.start.toLocaleDateString()} - {period.end.toLocaleDateString()}</p>\n                            <p style={{ margin: '5px 0' }}><strong>Admission:</strong> {client.admissionDate ? new Date(client.admissionDate).toLocaleDateString() : 'N/A'}</p>\n                            <p style={{ margin: '5px 0' }}><strong>Agency Check:</strong> COMPLIANT</p>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Authorizations Section */}\n                <div style={{ marginBottom: '40px' }}>\n                    <h3 style={{ borderBottom: '1px solid #000', paddingBottom: '5px', fontSize: '18px' }}>Active Authorizations (T1019/Personal Care)</h3>\n                    <table style={{ width: '100%', borderCollapse: 'collapse', marginTop: '10px', tableLayout: 'fixed' }}>\n                        <thead>\n                            <tr style={{ textAlign: 'left', borderBottom: '1px solid #000', fontSize: '14px' }}>\n                                <th style={{ padding: '8px 0' }}>Auth Number</th>\n                                <th>Service Code</th>\n                                <th>Start Date</th>\n                                <th>End Date</th>\n                                <th style={{ textAlign: 'right' }}>Total Units</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {client.authorizations.map(auth => (\n                                <tr key={auth.id} style={{ borderBottom: '1px solid #eee', fontSize: '14px' }}>\n                                    <td style={{ padding: '8px 0' }}>{auth.authNumber}</td>\n                                    <td>{auth.serviceCode}</td>\n                                    <td>{new Date(auth.startDate).toLocaleDateString()}</td>\n                                    <td>{new Date(auth.endDate).toLocaleDateString()}</td>\n                                    <td style={{ textAlign: 'right' }}>{auth.totalUnits}</td>\n                                </tr>\n                            ))}\n                            {client.authorizations.length === 0 && (\n                                <tr>\n                                    <td colSpan={5} style={{ padding: '20px', textAlign: 'center', color: '#666', fontSize: '14px' }}>No authorizations found for this period.</td>\n                                </tr>\n                            )}\n                        </tbody>\n                    </table>\n                </div>\n\n                {/* Visit Records (The \"Timesheets\") */}\n                <div style={{ pageBreakBefore: 'always' }}>\n                    <h3 style={{ borderBottom: '1px solid #000', paddingBottom: '5px', fontSize: '18px' }}>EVV Timesheets & Verification Logs</h3>\n                    <p style={{ fontSize: '12px', color: '#666', marginBottom: '20px' }}>*All records verified via GPS and electronic caregiver signature.</p>\n\n                    {client.clientVisits.map((visit, idx) => (\n                        <div key={visit.id} style={{\n                            marginTop: '20px',\n                            padding: '15px',\n                            border: '1px solid #000',\n                            borderRadius: '2px',\n                            pageBreakInside: 'avoid'\n                        }}>\n                            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '10px', fontWeight: 'bold' }}>\n                                <span>VISIT LOG #{idx + 1}</span>\n                                <span>DATE: {new Date(visit.startDateTime!).toLocaleDateString()}</span>\n                            </div>\n                            <div style={{ display: 'grid', gridTemplateColumns: '1.5fr 1fr', gap: '20px', fontSize: '13px' }}>\n                                <div>\n                                    <p><strong>Caregiver:</strong> {visit.caregiver?.name || 'N/A'}</p>\n                                    <p><strong>Service Type:</strong> {visit.serviceType}</p>\n                                    <p><strong>Clock-In:</strong> {new Date(visit.startDateTime!).toLocaleTimeString()} (GPS: {visit.startLatitude}, {visit.startLongitude})</p>\n                                    <p><strong>Clock-Out:</strong> {visit.endDateTime ? new Date(visit.endDateTime).toLocaleTimeString() : 'N/A'}</p>\n                                    <p><strong>Units:</strong> {visit.endDateTime && visit.startDateTime ? Math.floor((new Date(visit.endDateTime).getTime() - new Date(visit.startDateTime).getTime()) / 60000 / 15 * 100) / 100 : 'N/A'}</p>\n                                </div>\n                                <div style={{ borderLeft: '1px solid #ddd', paddingLeft: '20px' }}>\n                                    <p><strong>EVV Status:</strong> <span style={{ color: 'green', fontWeight: 'bold' }}>VERIFIED</span></p>\n                                    <p><strong>GPS Compliance:</strong> ‚úì AT ADDRESS</p>\n                                    <p><strong>Signature:</strong> {visit.clientSignature ? '‚úì RECEIVED' : '‚ö†Ô∏è ON FILE'}</p>\n                                    <p><strong>Tasks:</strong> {visit.completedTasks.length} ADLs/IADLs recorded</p>\n                                </div>\n                            </div>\n                            {visit.completedTasks.length > 0 && (\n                                <div style={{ marginTop: '10px', fontSize: '11px', background: '#f5f5f5', padding: '8px', border: '1px solid #eee' }}>\n                                    <strong>Care Logs:</strong> {visit.completedTasks.map((t: any) => t.task.taskName).join(', ')}\n                                </div>\n                            )}\n                            {visit.notes && (\n                                <div style={{ marginTop: '8px', fontSize: '11px', fontStyle: 'italic' }}>\n                                    <strong>Progress Notes:</strong> {visit.notes}\n                                </div>\n                            )}\n                        </div>\n                    ))}\n                    {client.clientVisits.length === 0 && (\n                        <div style={{ textAlign: 'center', marginTop: '40px', padding: '40px', border: '1px dashed #ccc' }}>\n                            <p style={{ color: '#666' }}>No visit records found for this period in the EVV module.</p>\n                        </div>\n                    )}\n                </div>\n\n                {/* Footer / Signatures */}\n                <div style={{ marginTop: '60px', borderTop: '2px solid #000', paddingTop: '20px', textAlign: 'center', fontSize: '12px' }}>\n                    <p>I certify that the above services were provided in accordance with Wisconsin DHS T1019 Personal Care regulations.</p>\n                    <div style={{ display: 'flex', justifyContent: 'space-around', marginTop: '40px' }}>\n                        <div style={{ borderTop: '1px solid #000', width: '220px', paddingTop: '5px' }}>Agency Administrator / RN</div>\n                        <div style={{ borderTop: '1px solid #000', width: '220px', paddingTop: '5px' }}>Date Signature Generated</div>\n                    </div>\n                </div>\n\n                <div style={{ textAlign: 'center', marginTop: '40px' }}>\n                    <PrintButton />\n                </div>\n            </div>\n\n            <style dangerouslySetInnerHTML={{\n                __html: `\n                @media print {\n                    .no-print { display: none !important; }\n                    body { background: white !important; padding: 0 !important; }\n                    .audit-packet { \n                        box-shadow: none !important; \n                        margin: 0 !important; \n                        width: 100% !important; \n                        max-width: none !important;\n                        padding: 0 !important;\n                    }\n                    div[style*=\"box-shadow\"] {\n                        box-shadow: none !important;\n                    }\n                }\n                @page {\n                    margin: 1.5cm;\n                }\n            `}} />\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/app/dashboard/audit/page.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":13,"column":30,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[468,575],"text":"\n                    Generate &quot;Single Client Audit Packets\" for Wisconsin Medicaid audits.\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[468,575],"text":"\n                    Generate &ldquo;Single Client Audit Packets\" for Wisconsin Medicaid audits.\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[468,575],"text":"\n                    Generate &#34;Single Client Audit Packets\" for Wisconsin Medicaid audits.\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[468,575],"text":"\n                    Generate &rdquo;Single Client Audit Packets\" for Wisconsin Medicaid audits.\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":13,"column":58,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[468,575],"text":"\n                    Generate \"Single Client Audit Packets&quot; for Wisconsin Medicaid audits.\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[468,575],"text":"\n                    Generate \"Single Client Audit Packets&ldquo; for Wisconsin Medicaid audits.\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[468,575],"text":"\n                    Generate \"Single Client Audit Packets&#34; for Wisconsin Medicaid audits.\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[468,575],"text":"\n                    Generate \"Single Client Audit Packets&rdquo; for Wisconsin Medicaid audits.\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":56,"column":69,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3124,3200],"text":"Verify that GPS coordinates match the client&apos;s home address within 500 feet."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3124,3200],"text":"Verify that GPS coordinates match the client&lsquo;s home address within 500 feet."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3124,3200],"text":"Verify that GPS coordinates match the client&#39;s home address within 500 feet."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3124,3200],"text":"Verify that GPS coordinates match the client&rsquo;s home address within 500 feet."},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport Link from 'next/link';\nimport { getClientsForAudit } from '@/lib/actions/audit';\n\nexport default async function AuditVaultPage() {\n    const clients = await getClientsForAudit();\n\n    return (\n        <div className=\"fade-in\">\n            <div style={{ marginBottom: '2.5rem' }}>\n                <h1 style={{ fontSize: '2rem', marginBottom: '0.5rem' }}>T1019 Audit Vault</h1>\n                <p style={{ color: 'var(--text-muted)' }}>\n                    Generate \"Single Client Audit Packets\" for Wisconsin Medicaid audits.\n                </p>\n            </div>\n\n            <div className=\"glass\" style={{ overflow: 'x-auto' }}>\n                <table style={{ width: '100%', borderCollapse: 'collapse' }}>\n                    <thead>\n                        <tr style={{ borderBottom: '1px solid var(--glass-border)', textAlign: 'left' }}>\n                            <th style={{ padding: '1rem' }}>Client Name</th>\n                            <th style={{ padding: '1rem' }}>Visits</th>\n                            <th style={{ padding: '1rem' }}>Auths</th>\n                            <th style={{ padding: '1rem' }}>Action</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {clients.map((client) => (\n                            <tr key={client.id} style={{ borderBottom: '1px solid var(--glass-border)' }}>\n                                <td style={{ padding: '1rem' }}>{client.firstName} {client.lastName}</td>\n                                <td style={{ padding: '1rem' }}>{client._count.clientVisits}</td>\n                                <td style={{ padding: '1rem' }}>{client._count.authorizations}</td>\n                                <td style={{ padding: '1rem' }}>\n                                    <Link href={`/dashboard/audit/${client.id}`} className=\"btn-primary\" style={{ fontSize: '0.8rem', padding: '0.4rem 0.8rem' }}>\n                                        Open Audit Vault\n                                    </Link>\n                                </td>\n                            </tr>\n                        ))}\n                        {clients.length === 0 && (\n                            <tr>\n                                <td colSpan={4} style={{ padding: '2rem', textAlign: 'center', color: 'var(--text-muted)' }}>\n                                    No active clients found. Ensure clients are marked as CUSTOMER in the CRM.\n                                </td>\n                            </tr>\n                        )}\n                    </tbody>\n                </table>\n            </div>\n\n            {/* Audit Tips */}\n            <div style={{ marginTop: '3rem', padding: '1.5rem', border: '1px dashed var(--glass-border)', borderRadius: '8px' }}>\n                <h3 style={{ fontSize: '1rem', marginBottom: '1rem' }}>üõ°Ô∏è Wisconsin Audit Tips</h3>\n                <ul style={{ fontSize: '0.85rem', color: 'var(--text-muted)', lineHeight: '1.6' }}>\n                    <li>Ensure all T1019 timesheets have caregiver and client signatures.</li>\n                    <li>Verify that GPS coordinates match the client's home address within 500 feet.</li>\n                    <li>Cross-reference visit starts with Authorization start dates.</li>\n                </ul>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/app/dashboard/crm/care-plans/[contactId]/page.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":41,"column":53,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1744,1983],"text":"\n                    You can add specific tasks like &quot;Confirm Monday Morning Meds\" or \"Check Fridge for Expired Food\".\n                    Changes are synced in real-time to the caregiver's mobile app for their next visit.\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1744,1983],"text":"\n                    You can add specific tasks like &ldquo;Confirm Monday Morning Meds\" or \"Check Fridge for Expired Food\".\n                    Changes are synced in real-time to the caregiver's mobile app for their next visit.\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1744,1983],"text":"\n                    You can add specific tasks like &#34;Confirm Monday Morning Meds\" or \"Check Fridge for Expired Food\".\n                    Changes are synced in real-time to the caregiver's mobile app for their next visit.\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1744,1983],"text":"\n                    You can add specific tasks like &rdquo;Confirm Monday Morning Meds\" or \"Check Fridge for Expired Food\".\n                    Changes are synced in real-time to the caregiver's mobile app for their next visit.\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":41,"column":81,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1744,1983],"text":"\n                    You can add specific tasks like \"Confirm Monday Morning Meds&quot; or \"Check Fridge for Expired Food\".\n                    Changes are synced in real-time to the caregiver's mobile app for their next visit.\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1744,1983],"text":"\n                    You can add specific tasks like \"Confirm Monday Morning Meds&ldquo; or \"Check Fridge for Expired Food\".\n                    Changes are synced in real-time to the caregiver's mobile app for their next visit.\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1744,1983],"text":"\n                    You can add specific tasks like \"Confirm Monday Morning Meds&#34; or \"Check Fridge for Expired Food\".\n                    Changes are synced in real-time to the caregiver's mobile app for their next visit.\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1744,1983],"text":"\n                    You can add specific tasks like \"Confirm Monday Morning Meds&rdquo; or \"Check Fridge for Expired Food\".\n                    Changes are synced in real-time to the caregiver's mobile app for their next visit.\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":41,"column":86,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1744,1983],"text":"\n                    You can add specific tasks like \"Confirm Monday Morning Meds\" or &quot;Check Fridge for Expired Food\".\n                    Changes are synced in real-time to the caregiver's mobile app for their next visit.\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1744,1983],"text":"\n                    You can add specific tasks like \"Confirm Monday Morning Meds\" or &ldquo;Check Fridge for Expired Food\".\n                    Changes are synced in real-time to the caregiver's mobile app for their next visit.\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1744,1983],"text":"\n                    You can add specific tasks like \"Confirm Monday Morning Meds\" or &#34;Check Fridge for Expired Food\".\n                    Changes are synced in real-time to the caregiver's mobile app for their next visit.\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1744,1983],"text":"\n                    You can add specific tasks like \"Confirm Monday Morning Meds\" or &rdquo;Check Fridge for Expired Food\".\n                    Changes are synced in real-time to the caregiver's mobile app for their next visit.\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":41,"column":116,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1744,1983],"text":"\n                    You can add specific tasks like \"Confirm Monday Morning Meds\" or \"Check Fridge for Expired Food&quot;.\n                    Changes are synced in real-time to the caregiver's mobile app for their next visit.\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1744,1983],"text":"\n                    You can add specific tasks like \"Confirm Monday Morning Meds\" or \"Check Fridge for Expired Food&ldquo;.\n                    Changes are synced in real-time to the caregiver's mobile app for their next visit.\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1744,1983],"text":"\n                    You can add specific tasks like \"Confirm Monday Morning Meds\" or \"Check Fridge for Expired Food&#34;.\n                    Changes are synced in real-time to the caregiver's mobile app for their next visit.\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1744,1983],"text":"\n                    You can add specific tasks like \"Confirm Monday Morning Meds\" or \"Check Fridge for Expired Food&rdquo;.\n                    Changes are synced in real-time to the caregiver's mobile app for their next visit.\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":42,"column":69,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[1744,1983],"text":"\n                    You can add specific tasks like \"Confirm Monday Morning Meds\" or \"Check Fridge for Expired Food\".\n                    Changes are synced in real-time to the caregiver&apos;s mobile app for their next visit.\n                "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[1744,1983],"text":"\n                    You can add specific tasks like \"Confirm Monday Morning Meds\" or \"Check Fridge for Expired Food\".\n                    Changes are synced in real-time to the caregiver&lsquo;s mobile app for their next visit.\n                "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[1744,1983],"text":"\n                    You can add specific tasks like \"Confirm Monday Morning Meds\" or \"Check Fridge for Expired Food\".\n                    Changes are synced in real-time to the caregiver&#39;s mobile app for their next visit.\n                "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[1744,1983],"text":"\n                    You can add specific tasks like \"Confirm Monday Morning Meds\" or \"Check Fridge for Expired Food\".\n                    Changes are synced in real-time to the caregiver&rsquo;s mobile app for their next visit.\n                "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { prisma } from '@/lib/db';\nimport CarePlanBuilder from '@/components/crm/CarePlanBuilder';\n\nexport default async function CarePlanBuilderPage({ params }: { params: Promise<{ contactId: string }> }) {\n    const { contactId } = await params;\n\n    const client = await prisma.contact.findUnique({\n        where: { id: contactId },\n        include: {\n            carePlans: {\n                where: { status: 'ACTIVE' },\n                include: { tasks: true }\n            }\n        }\n    });\n\n    if (!client) return <div style={{ padding: '2rem' }}>Client not found</div>;\n\n    const activeCarePlan = client.carePlans[0];\n    const initialTasks = activeCarePlan?.tasks.map(t => ({\n        taskName: t.taskName,\n        category: t.category || 'ADL'\n    })) || [];\n\n    return (\n        <div className=\"fade-in\">\n            <div style={{ marginBottom: '2.5rem' }}>\n                <h1 style={{ fontSize: '2rem', marginBottom: '0.5rem' }}>Care Plan Builder</h1>\n                <p style={{ color: 'var(--text-muted)' }}>\n                    Customize the daily care checklist for <strong>{client.firstName} {client.lastName}</strong>.\n                </p>\n            </div>\n\n            <CarePlanBuilder contactId={contactId} initialTasks={initialTasks} />\n\n            {/* Contextual help for the \"No-Code\" builder */}\n            <div style={{ marginTop: '3rem', padding: '1.5rem', background: 'rgba(59, 130, 246, 0.05)', borderRadius: '12px', border: '1px solid rgba(59, 130, 246, 0.1)' }}>\n                <h3 style={{ fontSize: '1rem', color: '#3b82f6', marginBottom: '0.5rem' }}>üí° Pro-Tip: Custom Checklists</h3>\n                <p style={{ fontSize: '0.85rem', color: 'var(--text-muted)', margin: 0 }}>\n                    You can add specific tasks like \"Confirm Monday Morning Meds\" or \"Check Fridge for Expired Food\".\n                    Changes are synced in real-time to the caregiver's mobile app for their next visit.\n                </p>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/app/dashboard/crm/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/app/dashboard/email/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/app/dashboard/evv/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2624,2627],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2624,2627],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2755,2758],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2755,2758],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":99,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":99,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4319,4322],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4319,4322],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":114,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":114,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4687,4690],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4687,4690],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":225,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":225,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11000,11003],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11000,11003],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":304,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":304,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15454,15457],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15454,15457],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { getEvvStatus, startVisit, endVisit, getVisitHistory, getSandataConfig, saveSandataConfig, manualSync } from '@/lib/actions/evv';\nimport { getContacts } from '@/lib/actions';\nimport { MapPin, Play, Square, CloudUpload, ScrollText, Settings, User } from 'lucide-react';\n\nexport default function EVVDashboard() {\n    const [activeTab, setActiveTab] = useState<'tracker' | 'history' | 'config'>('tracker');\n\n    return (\n        <div className=\"fade-in\">\n            <div style={{ marginBottom: '2rem', display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\n                <div>\n                    <h1 style={{ fontSize: '2rem', marginBottom: '0.5rem' }}>EVV: Electronic Visit Verification</h1>\n                    <p style={{ color: 'var(--text-muted)' }}>DHS Compliant Visit Tracking & Sandata Sync</p>\n                </div>\n            </div>\n\n            <div className=\"glass\" style={{ marginBottom: '2rem', padding: '0.5rem', display: 'flex', gap: '0.5rem' }}>\n                <button\n                    onClick={() => setActiveTab('tracker')}\n                    className={activeTab === 'tracker' ? 'btn-primary' : 'btn-ghost'}\n                    style={{ flex: 1, display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '0.5rem' }}\n                >\n                    <MapPin size={18} /> Visit Tracker\n                </button>\n                <button\n                    onClick={() => setActiveTab('history')}\n                    className={activeTab === 'history' ? 'btn-primary' : 'btn-ghost'}\n                    style={{ flex: 1, display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '0.5rem' }}\n                >\n                    <ScrollText size={18} /> Visit History\n                </button>\n                <button\n                    onClick={() => setActiveTab('config')}\n                    className={activeTab === 'config' ? 'btn-primary' : 'btn-ghost'}\n                    style={{ flex: 1, display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '0.5rem' }}\n                >\n                    <Settings size={18} /> Configuration\n                </button>\n            </div>\n\n            {activeTab === 'tracker' && <VisitTracker />}\n            {activeTab === 'history' && <VisitHistory />}\n            {activeTab === 'config' && <SandataConfiguration />}\n        </div>\n    );\n}\n\nfunction VisitTracker() {\n    const [status, setStatus] = useState<'idle' | 'loading' | 'active'>('loading');\n    const [activeVisit, setActiveVisit] = useState<any>(null); // Keeping any for now to avoid massive type refactor but could use unknown\n    const [clients, setClients] = useState<any[]>([]);\n\n    // Form State\n    const [selectedClient, setSelectedClient] = useState('');\n    const [serviceType, setServiceType] = useState('Personal Care (T1019)');\n    const [location, setLocation] = useState<{ lat: number, lng: number } | null>(null);\n    const [locationError, setLocationError] = useState('');\n\n    useEffect(() => {\n        // Init: Get Status and Contacts\n        Promise.all([getEvvStatus(), getContacts()]).then(([evv, contacts]) => {\n            setClients(contacts);\n            if (evv.activeVisit) {\n                setActiveVisit(evv.activeVisit);\n                setStatus('active');\n            } else {\n                setStatus('idle');\n            }\n        });\n\n        // Loop for GPS\n        const watchId = navigator.geolocation.watchPosition(\n            (pos) => setLocation({ lat: pos.coords.latitude, lng: pos.coords.longitude }),\n            (err) => setLocationError(err.message),\n            { enableHighAccuracy: true }\n        );\n\n        return () => navigator.geolocation.clearWatch(watchId);\n    }, []);\n\n    const handleStart = async () => {\n        if (!location) {\n            alert('Waiting for GPS location...');\n            return;\n        }\n        if (!selectedClient) {\n            alert('Please select a client.');\n            return;\n        }\n\n        try {\n            await startVisit(selectedClient, location.lat, location.lng, serviceType);\n            const { activeVisit } = await getEvvStatus();\n            setActiveVisit(activeVisit);\n            setStatus('active');\n        } catch (e: any) {\n            alert(e.message);\n        }\n    };\n\n    const handleEnd = async () => {\n        if (!location) {\n            alert('Waiting for GPS location...');\n            return;\n        }\n\n        try {\n            await endVisit(activeVisit.id, location.lat, location.lng);\n            setActiveVisit(null);\n            setStatus('idle');\n        } catch (e: any) {\n            alert(e.message);\n        }\n    };\n\n    if (status === 'loading') return <div>Loading tracker...</div>;\n\n    return (\n        <div className=\"glass\" style={{ padding: '2rem', maxWidth: '600px', margin: '0 auto', textAlign: 'center' }}>\n            <div style={{ marginBottom: '1.5rem', padding: '1rem', background: 'rgba(59, 130, 246, 0.1)', borderRadius: '8px', border: '1px solid rgba(59, 130, 246, 0.2)' }}>\n                <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '0.5rem', color: location ? 'var(--success)' : 'var(--warning)' }}>\n                    <MapPin size={20} />\n                    <span>{location ? `GPS Signal Acquired (${location.lat.toFixed(4)}, ${location.lng.toFixed(4)})` : 'Acquiring GPS Signal...'}</span>\n                </div>\n                {locationError && <div style={{ color: 'var(--error)', fontSize: '0.8rem', marginTop: '0.5rem' }}>{locationError}</div>}\n            </div>\n\n            {status === 'active' ? (\n                <div className=\"fade-in\">\n                    <div style={{ fontSize: '1.25rem', marginBottom: '0.5rem' }}>Visit In Progress</div>\n                    <h2 style={{ fontSize: '2rem', fontWeight: 'bold', marginBottom: '1rem', color: 'var(--primary)' }}>\n                        {new Date().toLocaleTimeString()}\n                    </h2>\n\n                    <div style={{ textAlign: 'left', background: 'rgba(255,255,255,0.05)', padding: '1.5rem', borderRadius: '12px', marginBottom: '2rem' }}>\n                        <div style={{ display: 'grid', gridTemplateColumns: 'auto 1fr', gap: '1rem', alignItems: 'center' }}>\n                            <User size={20} style={{ color: 'var(--text-muted)' }} />\n                            <div>\n                                <div style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>Client</div>\n                                <div>{activeVisit?.client?.firstName} {activeVisit?.client?.lastName}</div>\n                            </div>\n\n                            <ScrollText size={20} style={{ color: 'var(--text-muted)' }} />\n                            <div>\n                                <div style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>Service</div>\n                                <div>{activeVisit?.serviceType}</div>\n                            </div>\n                            <Play size={20} style={{ color: 'var(--text-muted)' }} />\n                            <div>\n                                <div style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>Started At</div>\n                                <div>{new Date(activeVisit?.startDateTime).toLocaleTimeString()}</div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <button\n                        onClick={handleEnd}\n                        style={{\n                            width: '100%', padding: '1rem', borderRadius: '12px',\n                            background: 'var(--error)', color: 'white', border: 'none',\n                            fontSize: '1.1rem', fontWeight: 'bold', cursor: 'pointer',\n                            display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '1rem'\n                        }}\n                    >\n                        <Square fill=\"white\" size={20} /> End Visit\n                    </button>\n                </div>\n            ) : (\n                <div className=\"fade-in\">\n                    <h2 style={{ marginBottom: '2rem' }}>Start New Visit</h2>\n\n                    <div style={{ textAlign: 'left', marginBottom: '1.5rem' }}>\n                        <label style={{ display: 'block', marginBottom: '0.5rem', color: 'var(--text-muted)' }}>Select Client</label>\n                        <select\n                            value={selectedClient}\n                            onChange={(e) => setSelectedClient(e.target.value)}\n                            className=\"glass input\"\n                            style={{ width: '100%', padding: '0.75rem', borderRadius: '8px', background: 'rgba(0,0,0,0.2)', color: 'white' }}\n                        >\n                            <option value=\"\">-- Select Client --</option>\n                            {clients.map(c => (\n                                <option key={c.id} value={c.id}>{c.firstName} {c.lastName}</option>\n                            ))}\n                        </select>\n                    </div>\n\n                    <div style={{ textAlign: 'left', marginBottom: '2rem' }}>\n                        <label style={{ display: 'block', marginBottom: '0.5rem', color: 'var(--text-muted)' }}>Service Type</label>\n                        <select\n                            value={serviceType}\n                            onChange={(e) => setServiceType(e.target.value)}\n                            className=\"glass input\"\n                            style={{ width: '100%', padding: '0.75rem', borderRadius: '8px', background: 'rgba(0,0,0,0.2)', color: 'white' }}\n                        >\n                            <option>Personal Care (T1019)</option>\n                            <option>Respite Care (S5150)</option>\n                            <option>Home Health Aide (G0156)</option>\n                            <option>Nursing Assessment (T1001)</option>\n                        </select>\n                    </div>\n\n                    <button\n                        onClick={handleStart}\n                        disabled={!location}\n                        style={{\n                            width: '100%', padding: '1rem', borderRadius: '12px',\n                            background: location ? 'var(--success)' : 'var(--text-muted)', color: 'white', border: 'none',\n                            fontSize: '1.1rem', fontWeight: 'bold', cursor: location ? 'pointer' : 'not-allowed',\n                            display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '1rem',\n                            opacity: location ? 1 : 0.7\n                        }}\n                    >\n                        <Play fill=\"white\" size={20} /> Start Visit\n                    </button>\n                </div>\n            )}\n        </div>\n    );\n}\n\nfunction VisitHistory() {\n    const [visits, setVisits] = useState<any[]>([]);\n\n    useEffect(() => {\n        getVisitHistory().then(setVisits);\n    }, []);\n\n    const handleSync = async (id: string) => {\n        const res = await manualSync(id);\n        if (res.success) {\n            // refresh\n            getVisitHistory().then(setVisits);\n            alert('Synced successfully');\n        } else {\n            alert('Sync failed: ' + res.error);\n        }\n    };\n\n    return (\n        <div className=\"glass\" style={{ padding: '1.5rem' }}>\n            <table style={{ width: '100%', borderCollapse: 'collapse' }}>\n                <thead>\n                    <tr style={{ borderBottom: '1px solid var(--glass-border)', textAlign: 'left' }}>\n                        <th style={{ padding: '0.75rem', color: 'var(--text-muted)' }}>Date</th>\n                        <th style={{ padding: '0.75rem', color: 'var(--text-muted)' }}>Client</th>\n                        <th style={{ padding: '0.75rem', color: 'var(--text-muted)' }}>Caregiver</th>\n                        <th style={{ padding: '0.75rem', color: 'var(--text-muted)' }}>Duration</th>\n                        <th style={{ padding: '0.75rem', color: 'var(--text-muted)' }}>Status</th>\n                        <th style={{ padding: '0.75rem', color: 'var(--text-muted)' }}>Sandata</th>\n                        <th style={{ padding: '0.75rem', color: 'var(--text-muted)' }}>Action</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {visits.map(v => {\n                        const duration = v.endDateTime\n                            ? Math.round((new Date(v.endDateTime).getTime() - new Date(v.startDateTime).getTime()) / 60000) + ' min'\n                            : 'Active';\n\n                        return (\n                            <tr key={v.id} style={{ borderBottom: '1px solid var(--glass-border)' }}>\n                                <td style={{ padding: '0.75rem' }}>{new Date(v.startDateTime).toLocaleDateString()}</td>\n                                <td style={{ padding: '0.75rem' }}>{v.client?.firstName} {v.client?.lastName}</td>\n                                <td style={{ padding: '0.75rem' }}>{v.caregiver?.name}</td>\n                                <td style={{ padding: '0.75rem' }}>{duration}</td>\n                                <td style={{ padding: '0.75rem' }}>\n                                    <span style={{\n                                        padding: '0.25rem 0.75rem', borderRadius: '999px', fontSize: '0.75rem',\n                                        background: v.status === 'IN_PROGRESS' ? 'rgba(59, 130, 246, 0.1)' :\n                                            v.status === 'COMPLETED' ? 'rgba(234, 179, 8, 0.1)' :\n                                                'rgba(34, 197, 94, 0.1)',\n                                        color: v.status === 'IN_PROGRESS' ? 'var(--primary)' :\n                                            v.status === 'COMPLETED' ? 'var(--warning)' :\n                                                'var(--success)'\n                                    }}>\n                                        {v.status}\n                                    </span>\n                                </td>\n                                <td style={{ padding: '0.75rem', fontSize: '0.8rem', fontFamily: 'monospace' }}>\n                                    {v.sandataTransactionId || '-'}\n                                </td>\n                                <td style={{ padding: '0.75rem' }}>\n                                    {v.status === 'COMPLETED' && !v.sandataTransactionId && (\n                                        <button\n                                            onClick={() => handleSync(v.id)}\n                                            style={{ background: 'transparent', border: '1px solid var(--primary)', color: 'var(--primary)', borderRadius: '4px', padding: '4px 8px', cursor: 'pointer', display: 'flex', alignItems: 'center', gap: '4px', fontSize: '0.75rem' }}\n                                        >\n                                            <CloudUpload size={12} /> Sync\n                                        </button>\n                                    )}\n                                </td>\n                            </tr>\n                        );\n                    })}\n                </tbody>\n            </table>\n        </div>\n    );\n}\n\nfunction SandataConfiguration() {\n    const [config, setConfig] = useState<any>(null);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        getSandataConfig().then(data => {\n            setConfig(data || {});\n            setLoading(false);\n        });\n    }, []);\n\n    if (loading) return <div>Loading config...</div>;\n\n    return (\n        <div className=\"glass\" style={{ padding: '2rem', maxWidth: '600px' }}>\n            <h2 style={{ marginBottom: '1.5rem' }}>Sandata Aggregator Settings</h2>\n            <form action={async (formData) => {\n                await saveSandataConfig(formData);\n                alert('Saved');\n            }}>\n                <div style={{ marginBottom: '1rem' }}>\n                    <label style={{ display: 'block', marginBottom: '0.5rem' }}>Agency ID (Sandata)</label>\n                    <input name=\"agencyId\" defaultValue={config.agencyId} className=\"glass\" style={{ width: '100%', padding: '0.75rem' }} required />\n                </div>\n                <div style={{ marginBottom: '1rem' }}>\n                    <label style={{ display: 'block', marginBottom: '0.5rem' }}>Provider ID (Medicaid)</label>\n                    <input name=\"providerId\" defaultValue={config.providerId} className=\"glass\" style={{ width: '100%', padding: '0.75rem' }} required />\n                </div>\n                <div style={{ marginBottom: '1rem' }}>\n                    <label style={{ display: 'block', marginBottom: '0.5rem' }}>Username</label>\n                    <input name=\"username\" defaultValue={config.username} className=\"glass\" style={{ width: '100%', padding: '0.75rem' }} required />\n                </div>\n                <div style={{ marginBottom: '1rem' }}>\n                    <label style={{ display: 'block', marginBottom: '0.5rem' }}>Password</label>\n                    <input name=\"password\" type=\"password\" defaultValue={config.password} className=\"glass\" style={{ width: '100%', padding: '0.75rem' }} required />\n                </div>\n                <div style={{ marginBottom: '2rem' }}>\n                    <label style={{ display: 'block', marginBottom: '0.5rem' }}>Environment</label>\n                    <select name=\"environment\" defaultValue={config.environment || 'TEST'} className=\"glass\" style={{ width: '100%', padding: '0.75rem' }}>\n                        <option value=\"TEST\" style={{ color: 'black' }}>Test / Sandbox</option>\n                        <option value=\"PROD\" style={{ color: 'black' }}>Production</option>\n                    </select>\n                </div>\n                <button type=\"submit\" className=\"btn-primary\" style={{ width: '100%' }}>Save Configuration</button>\n            </form>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/app/dashboard/fax/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/app/dashboard/forms/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[976,979],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[976,979],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use server';\n\nimport React from 'react';\nimport { getForms } from '@/lib/actions/forms';\nimport { Trash2, ClipboardList } from 'lucide-react';\nimport FormBuilderDialog from '@/components/forms/FormBuilderDialog';\n\nexport default async function FormsDashboard() {\n    const forms = await getForms();\n\n    return (\n        <div className=\"fade-in\">\n            <div style={{ marginBottom: '2.5rem', display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\n                <div>\n                    <h1 style={{ fontSize: '2rem', marginBottom: '0.5rem' }}>No-Code Form Builder</h1>\n                    <p style={{ color: 'var(--text-muted)' }}>Create and manage digital forms for ADLs, assessments, and signatures.</p>\n                </div>\n                <FormBuilderDialog />\n            </div>\n\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: '1.5rem' }}>\n                {forms.map((form: any) => (\n                    <div key={form.id} className=\"glass\" style={{ padding: '1.5rem', display: 'flex', flexDirection: 'column' }}>\n                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '1rem' }}>\n                            <div style={{ fontSize: '1.25rem', fontWeight: 'bold' }}>{form.title}</div>\n                            <span style={{\n                                padding: '2px 8px',\n                                borderRadius: '12px',\n                                fontSize: '0.7rem',\n                                background: 'rgba(34, 197, 94, 0.1)',\n                                color: 'var(--success)'\n                            }}>Active</span>\n                        </div>\n                        <p style={{ color: 'var(--text-muted)', fontSize: '0.9rem', flex: 1, marginBottom: '1.5rem' }}>\n                            {form.description || 'No description provided.'}\n                        </p>\n                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', borderTop: '1px solid var(--glass-border)', paddingTop: '1rem' }}>\n                            <div style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>\n                                {form.fields.length} Fields ‚Ä¢ 0 Submissions\n                            </div>\n                            <div style={{ display: 'flex', gap: '0.5rem' }}>\n                                <button className=\"btn-ghost\" style={{ padding: '0.5rem' }} title=\"View Submissions\">\n                                    <ClipboardList size={18} />\n                                </button>\n                                <button className=\"btn-ghost\" style={{ padding: '0.5rem', color: 'var(--error)' }} title=\"Delete Form\">\n                                    <Trash2 size={18} />\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                ))}\n            </div>\n\n            {forms.length === 0 && (\n                <div style={{ textAlign: 'center', padding: '5rem', background: 'rgba(255,255,255,0.02)', borderRadius: '12px', border: '1px dashed var(--glass-border)' }}>\n                    <ClipboardList size={48} style={{ marginBottom: '1rem', opacity: 0.2 }} />\n                    <p style={{ color: 'var(--text-muted)' }}>No forms created yet. Start by clicking &quot;New Form&quot;.</p>\n                </div>\n            )}\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/app/dashboard/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/app/dashboard/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Link' is defined but never used.","line":2,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport Link from 'next/link';\nimport { getDashboardStats } from '@/lib/actions/evv';\nimport { getVisitsRequiringAttention } from '@/lib/actions/billing';\nimport { getPayrollData } from '@/lib/actions/payroll';\nimport { getCurrentUser } from '@/lib/auth';\nimport { prisma } from '@/lib/db';\nimport {\n    MorningCoffeeWidget,\n    BillingAttentionWidget,\n    CRMMetricsWidget,\n    PayrollWatchdogWidget,\n    FaxStatusWidget,\n    VoIPActivityWidget\n} from '@/components/dashboard/DashboardWidgets';\nimport DashboardCustomizer from '@/components/dashboard/DashboardCustomizer';\n\nexport default async function DashboardOverview() {\n    const user = await getCurrentUser();\n    if (!user) return null;\n\n    // 1. Fetch Configuration\n    const config = await prisma.moduleConfig.findUnique({\n        where: { organizationId: user.organizationId }\n    });\n\n    const currentLayout: string[] = config?.dashboardLayout\n        ? JSON.parse(config.dashboardLayout)\n        : ['morning_coffee', 'billing_attention', 'crm_metrics', 'payroll_watchdog'];\n\n    // 2. Fetch Data for all potentially enabled widgets\n    const [\n        stats,\n        attentionVisits,\n        payrollData,\n        crmContactCount,\n        faxCount,\n        callCount\n    ] = await Promise.all([\n        getDashboardStats(),\n        getVisitsRequiringAttention(),\n        getPayrollData(),\n        prisma.contact.count({ where: { organizationId: user.organizationId } }),\n        prisma.faxMessage.count({ where: { organizationId: user.organizationId } }),\n        prisma.callLog.count({ where: { organizationId: user.organizationId, createdAt: { gte: new Date(new Date().setHours(0, 0, 0, 0)) } } })\n    ]);\n\n    // 3. Render Widgets\n    const renderWidget = (id: string) => {\n        switch (id) {\n            case 'morning_coffee':\n                return <MorningCoffeeWidget key={id} stats={stats} />;\n            case 'billing_attention':\n                return <BillingAttentionWidget key={id} visits={attentionVisits} />;\n            case 'crm_metrics':\n                return <CRMMetricsWidget key={id} deals={crmContactCount} value={`$${crmContactCount * 1250}.00`} />;\n            case 'payroll_watchdog':\n                return <PayrollWatchdogWidget key={id} caregivers={payrollData.caregivers} />;\n            case 'fax_status':\n                return <FaxStatusWidget key={id} newFaxes={2} total={faxCount} />;\n            case 'voip_activity':\n                return <VoIPActivityWidget key={id} calls={callCount} missed={0} />;\n            default:\n                return null;\n        }\n    };\n\n    return (\n        <div className=\"fade-in\" style={{ paddingBottom: '5rem' }}>\n            <div style={{ marginBottom: '2.5rem', display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\n                <div>\n                    <h1 style={{ fontSize: '2rem', marginBottom: '0.5rem' }}>Your Dashboard</h1>\n                    <p style={{ color: 'var(--text-muted)' }}>Welcome back, {user?.name || 'Admin'}.</p>\n                </div>\n            </div>\n\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: '1.5rem' }}>\n                {currentLayout.map(widgetId => renderWidget(widgetId))}\n            </div>\n\n            {currentLayout.length === 0 && (\n                <div style={{ textAlign: 'center', padding: '5rem', background: 'rgba(255,255,255,0.02)', borderRadius: '12px', border: '1px dashed var(--glass-border)' }}>\n                    <p style={{ color: 'var(--text-muted)' }}>Your dashboard is empty. Use the customizer to add widgets.</p>\n                </div>\n            )}\n\n            <DashboardCustomizer organizationId={user.organizationId} currentLayout={currentLayout} />\n        </div >\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/app/dashboard/payroll/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/app/dashboard/phone/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/app/dashboard/settings/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/app/dashboard/storage/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/app/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/app/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/CRMFeature.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/DashboardShell.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/FaxFeature.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/FileViewer.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":73,"column":25,"nodeType":"JSXOpeningElement","endLine":77,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React from 'react';\nimport { X } from 'lucide-react';\n\ninterface FileViewerProps {\n    isOpen: boolean;\n    onClose: () => void;\n    fileUrl: string | null;\n    fileName?: string;\n    fileType?: string; // 'application/pdf' or 'image/...'\n}\n\nexport default function FileViewer({ isOpen, onClose, fileUrl, fileName, fileType }: FileViewerProps) {\n    if (!isOpen || !fileUrl) return null;\n\n    const isPdf = fileType?.includes('pdf') || fileName?.toLowerCase().endsWith('.pdf') || fileUrl.includes('application/pdf');\n\n    return (\n        <div style={{\n            position: 'fixed',\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            background: 'rgba(0, 0, 0, 0.8)',\n            zIndex: 1000,\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            justifyContent: 'center',\n            padding: '2rem'\n        }}>\n            <div className=\"glass\" style={{\n                width: '90%',\n                height: '90%',\n                display: 'flex',\n                flexDirection: 'column',\n                position: 'relative',\n                padding: '1rem',\n                borderRadius: '12px'\n            }}>\n                <div style={{\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    marginBottom: '1rem',\n                    borderBottom: '1px solid var(--glass-border)',\n                    paddingBottom: '0.5rem'\n                }}>\n                    <h3 style={{ margin: 0 }}>{fileName || 'Document Viewer'}</h3>\n                    <button\n                        onClick={onClose}\n                        style={{\n                            background: 'transparent',\n                            border: 'none',\n                            color: 'var(--text-main)',\n                            cursor: 'pointer'\n                        }}\n                    >\n                        <X size={24} />\n                    </button>\n                </div>\n\n                <div style={{ flex: 1, background: '#fff', borderRadius: '4px', overflow: 'hidden' }}>\n                    {isPdf ? (\n                        <iframe\n                            src={fileUrl}\n                            style={{ width: '100%', height: '100%', border: 'none' }}\n                            title=\"PDF Viewer\"\n                        />\n                    ) : (\n                        <img\n                            src={fileUrl}\n                            alt={fileName || 'Document'}\n                            style={{ width: '100%', height: '100%', objectFit: 'contain' }}\n                        />\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/Hero.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/Navbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/VOIPFeature.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/ai/ChatInterface.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":66,"column":95,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":98,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2891,2894],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2891,2894],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useRef, useEffect } from 'react';\nimport { useChat } from '@ai-sdk/react';\nimport { Send, Bot, User, Sparkles } from 'lucide-react';\n\nexport default function ChatInterface() {\n    const { messages, append, isLoading } = useChat();\n    const [input, setInput] = React.useState('');\n    const messagesEndRef = useRef<HTMLDivElement>(null);\n\n    const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setInput(e.target.value);\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!input.trim()) return;\n        await append({ role: 'user', content: input });\n        setInput('');\n    };\n\n    const scrollToBottom = () => {\n        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n    };\n\n    useEffect(() => {\n        scrollToBottom();\n    }, [messages]);\n\n    return (\n        <div className=\"flex flex-col h-[600px] w-full max-w-4xl mx-auto glass overflow-hidden border border-[var(--glass-border)]\">\n            {/* Header */}\n            <div className=\"p-4 border-b border-[var(--glass-border)] bg-[rgba(255,255,255,0.03)] flex items-center gap-2\">\n                <Sparkles className=\"text-[var(--accent)]\" size={20} />\n                <h2 className=\"font-semibold text-lg\">AI Assistant</h2>\n            </div>\n\n            {/* Messages Area */}\n            <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n                {messages.length === 0 && (\n                    <div className=\"text-center text-[var(--text-muted)] mt-10\">\n                        <Bot size={48} className=\"mx-auto mb-4 opacity-50\" />\n                        <p className=\"text-lg\">How can I help you today?</p>\n                        <p className=\"text-sm opacity-75\">Ask me about your leads, deals, or schedule.</p>\n                    </div>\n                )}\n\n                {messages.map((m) => (\n                    <div\n                        key={m.id}\n                        className={`flex gap-3 ${m.role === 'user' ? 'justify-end' : 'justify-start'}`}\n                    >\n                        {m.role !== 'user' && (\n                            <div className=\"w-8 h-8 rounded-full bg-[rgba(6,182,212,0.1)] flex items-center justify-center shrink-0\">\n                                <Bot size={16} className=\"text-[var(--accent)]\" />\n                            </div>\n                        )}\n\n                        <div\n                            className={`max-w-[80%] p-3 rounded-2xl ${m.role === 'user'\n                                ? 'bg-[var(--accent)] text-white rounded-br-none'\n                                : 'bg-[var(--glass-bg)] border border-[var(--glass-border)] rounded-bl-none'\n                                }`}\n                        >\n                            <p className=\"whitespace-pre-wrap text-sm leading-relaxed\">{(m as any).content}</p>\n                        </div>\n\n                        {m.role === 'user' && (\n                            <div className=\"w-8 h-8 rounded-full bg-[rgba(255,255,255,0.1)] flex items-center justify-center shrink-0\">\n                                <User size={16} className=\"text-[var(--text-main)]\" />\n                            </div>\n                        )}\n                    </div>\n                ))}\n                {isLoading && (\n                    <div className=\"flex gap-3 justify-start\">\n                        <div className=\"w-8 h-8 rounded-full bg-[rgba(6,182,212,0.1)] flex items-center justify-center shrink-0\">\n                            <Bot size={16} className=\"text-[var(--accent)]\" />\n                        </div>\n                        <div className=\"bg-[var(--glass-bg)] border border-[var(--glass-border)] rounded-2xl rounded-bl-none p-3 flex items-center gap-1\">\n                            <div className=\"w-2 h-2 bg-[var(--text-muted)] rounded-full animate-bounce\" style={{ animationDelay: '0ms' }}></div>\n                            <div className=\"w-2 h-2 bg-[var(--text-muted)] rounded-full animate-bounce\" style={{ animationDelay: '150ms' }}></div>\n                            <div className=\"w-2 h-2 bg-[var(--text-muted)] rounded-full animate-bounce\" style={{ animationDelay: '300ms' }}></div>\n                        </div>\n                    </div>\n                )}\n                <div ref={messagesEndRef} />\n            </div>\n\n            {/* Input Area */}\n            <form onSubmit={handleSubmit} className=\"p-4 border-t border-[var(--glass-border)] bg-[rgba(255,255,255,0.03)]\">\n                <div className=\"relative flex items-center\">\n                    <input\n                        className=\"w-full bg-[rgba(0,0,0,0.2)] text-[var(--text-main)] placeholder-[var(--text-muted)] border border-[var(--glass-border)] rounded-xl py-3 pl-4 pr-12 focus:outline-none focus:border-[var(--accent)] focus:ring-1 focus:ring-[var(--accent)] transition-all\"\n                        value={input}\n                        onChange={handleInputChange}\n                        placeholder=\"Type your message...\"\n                    />\n                    <button\n                        type=\"submit\"\n                        disabled={isLoading || !input.trim()}\n                        className=\"absolute right-2 p-2 bg-[var(--accent)] text-white rounded-lg hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity\"\n                    >\n                        <Send size={16} />\n                    </button>\n                </div>\n            </form>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/audit/PrintButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/crm/ActivityFeed.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":7,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[203,206],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[203,206],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[461,464],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[461,464],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[529,532],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[529,532],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[537,540],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[537,540],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport { getContacts } from '@/lib/actions';\n\nexport default function ActivityFeed() {\n    const [activities, setActivities] = useState<any[]>([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        async function loadActivities() {\n            try {\n                const contacts = await getContacts();\n                const allActivities = contacts.flatMap((c: any) => c.activities || []);\n                allActivities.sort((a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n                setActivities(allActivities.slice(0, 5));\n            } catch (error) {\n                console.error(error);\n            } finally {\n                setLoading(false);\n            }\n        }\n        loadActivities();\n    }, []);\n\n    if (loading) return <div style={{ color: 'var(--text-muted)', fontSize: '0.85rem' }}>Loading...</div>;\n\n    return (\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\n            {activities.length === 0 ? (\n                <div style={{ color: 'var(--text-muted)', fontSize: '0.85rem' }}>No recent activities.</div>\n            ) : (\n                activities.map((act) => (\n                    <div key={act.id} style={{ padding: '0.75rem', borderRadius: '8px', borderLeft: '3px solid var(--primary)', background: 'rgba(255,255,255,0.03)' }}>\n                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '0.25rem' }}>\n                            <span style={{ fontSize: '0.75rem', fontWeight: 'bold', color: 'var(--primary)' }}>{act.type}</span>\n                            <span style={{ fontSize: '0.65rem', color: 'var(--text-muted)' }}>{new Date(act.createdAt).toLocaleDateString()}</span>\n                        </div>\n                        <p style={{ fontSize: '0.85rem', margin: 0 }}>{act.content}</p>\n                    </div>\n                ))\n            )}\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/crm/AddContactModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/crm/CarePlanBuilder.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":155,"column":55,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[7355,7457],"text":"\n                            No tasks added yet. Click &quot;+ Add Task\" to begin.\n                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[7355,7457],"text":"\n                            No tasks added yet. Click &ldquo;+ Add Task\" to begin.\n                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[7355,7457],"text":"\n                            No tasks added yet. Click &#34;+ Add Task\" to begin.\n                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[7355,7457],"text":"\n                            No tasks added yet. Click &rdquo;+ Add Task\" to begin.\n                        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":155,"column":66,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[7355,7457],"text":"\n                            No tasks added yet. Click \"+ Add Task&quot; to begin.\n                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[7355,7457],"text":"\n                            No tasks added yet. Click \"+ Add Task&ldquo; to begin.\n                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[7355,7457],"text":"\n                            No tasks added yet. Click \"+ Add Task&#34; to begin.\n                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[7355,7457],"text":"\n                            No tasks added yet. Click \"+ Add Task&rdquo; to begin.\n                        "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState } from 'react';\nimport { saveCarePlan } from '@/lib/actions/crm';\n\ninterface Task {\n    taskName: string;\n    category: string;\n}\n\nexport default function CarePlanBuilder({ contactId, initialTasks = [] }: { contactId: string, initialTasks?: Task[] }) {\n    const [title, setTitle] = useState('Standard Care Plan');\n    const [tasks, setTasks] = useState<Task[]>(initialTasks.length > 0 ? initialTasks : [\n        { taskName: 'Meal Preparation', category: 'IADL' },\n        { taskName: 'Bathing Assistance', category: 'ADL' },\n        { taskName: 'Medication Reminder', category: 'CLINICAL' }\n    ]);\n    const [isSaving, setIsSaving] = useState(false);\n\n    const addTask = () => {\n        setTasks([...tasks, { taskName: '', category: 'ADL' }]);\n    };\n\n    const removeTask = (index: number) => {\n        setTasks(tasks.filter((_, i) => i !== index));\n    };\n\n    const updateTask = (index: number, field: keyof Task, value: string) => {\n        const newTasks = [...tasks];\n        newTasks[index] = { ...newTasks[index], [field]: value };\n        setTasks(newTasks);\n    };\n\n    const handleSave = async () => {\n        setIsSaving(true);\n        try {\n            const validTasks = tasks.filter(t => t.taskName.trim() !== '');\n            if (validTasks.length === 0) {\n                alert('Please add at least one task');\n                return;\n            }\n            await saveCarePlan(contactId, title, validTasks);\n            alert('Care Plan saved successfully! It will now appear in the caregiver app.');\n        } catch (error) {\n            console.error(error);\n            alert('Failed to save care plan');\n        } finally {\n            setIsSaving(false);\n        }\n    };\n\n    return (\n        <div className=\"glass\" style={{ padding: '2rem' }}>\n            <div style={{ marginBottom: '2.5rem', borderBottom: '1px solid var(--glass-border)', paddingBottom: '1.5rem' }}>\n                <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: 'bold', fontSize: '0.9rem', color: 'var(--text-muted)' }}>Care Plan Title</label>\n                <input\n                    type=\"text\"\n                    value={title}\n                    onChange={(e) => setTitle(e.target.value)}\n                    placeholder=\"e.g. Monday Morning Checklist\"\n                    style={{\n                        width: '100%',\n                        padding: '1rem',\n                        background: 'rgba(255,255,255,0.05)',\n                        border: '1px solid var(--glass-border)',\n                        color: 'white',\n                        borderRadius: '8px',\n                        fontSize: '1.1rem'\n                    }}\n                />\n            </div>\n\n            <div style={{ marginBottom: '2.5rem' }}>\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1.5rem' }}>\n                    <h3 style={{ margin: 0, fontSize: '1.2rem' }}>Care Tasks & Daily Checklists</h3>\n                    <button\n                        onClick={addTask}\n                        className=\"btn-primary\"\n                        style={{ fontSize: '0.85rem', padding: '0.5rem 1rem', background: 'rgba(255,255,255,0.1)', color: 'white', border: '1px solid var(--glass-border)' }}\n                    >\n                        + Add Task\n                    </button>\n                </div>\n\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\n                    {tasks.map((task, index) => (\n                        <div key={index} style={{\n                            display: 'flex',\n                            gap: '1rem',\n                            alignItems: 'center',\n                            background: 'rgba(255,255,255,0.02)',\n                            padding: '1rem',\n                            borderRadius: '8px',\n                            border: '1px solid var(--glass-border)'\n                        }}>\n                            <div style={{ flex: 1 }}>\n                                <input\n                                    type=\"text\"\n                                    placeholder=\"Task Name (e.g. Assist with grooming)\"\n                                    value={task.taskName}\n                                    onChange={(e) => updateTask(index, 'taskName', e.target.value)}\n                                    style={{\n                                        width: '100%',\n                                        padding: '0.6rem',\n                                        background: 'transparent',\n                                        border: 'none',\n                                        borderBottom: '1px solid rgba(255,255,255,0.1)',\n                                        color: 'white',\n                                        fontSize: '1rem'\n                                    }}\n                                />\n                            </div>\n                            <div style={{ width: '150px' }}>\n                                <select\n                                    value={task.category}\n                                    onChange={(e) => updateTask(index, 'category', e.target.value)}\n                                    style={{\n                                        width: '100%',\n                                        padding: '0.6rem',\n                                        background: 'rgba(0,0,0,0.3)',\n                                        border: '1px solid var(--glass-border)',\n                                        color: 'white',\n                                        borderRadius: '4px',\n                                        fontSize: '0.85rem'\n                                    }}\n                                >\n                                    <option value=\"ADL\">ADL</option>\n                                    <option value=\"IADL\">IADL</option>\n                                    <option value=\"CLINICAL\">CLINICAL</option>\n                                    <option value=\"SAFETY\">SAFETY</option>\n                                </select>\n                            </div>\n                            <button\n                                onClick={() => removeTask(index)}\n                                style={{\n                                    background: 'rgba(255,68,68,0.1)',\n                                    border: 'none',\n                                    color: '#ff4444',\n                                    cursor: 'pointer',\n                                    width: '32px',\n                                    height: '32px',\n                                    borderRadius: '50%',\n                                    display: 'flex',\n                                    alignItems: 'center',\n                                    justifyContent: 'center',\n                                    fontSize: '1.2rem'\n                                }}\n                            >\n                                √ó\n                            </button>\n                        </div>\n                    ))}\n                    {tasks.length === 0 && (\n                        <div style={{ textAlign: 'center', padding: '2rem', color: 'var(--text-muted)', border: '1px dashed var(--glass-border)', borderRadius: '8px' }}>\n                            No tasks added yet. Click \"+ Add Task\" to begin.\n                        </div>\n                    )}\n                </div>\n            </div>\n\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\n                <button\n                    onClick={handleSave}\n                    className=\"btn-primary\"\n                    style={{ width: '100%', padding: '1.2rem', fontSize: '1rem', fontWeight: 'bold' }}\n                    disabled={isSaving}\n                >\n                    {isSaving ? 'Processing...' : 'Deploy Care Plan'}\n                </button>\n                <p style={{ textAlign: 'center', fontSize: '0.8rem', color: 'var(--text-muted)' }}>\n                    Deployed care plans are immediately synced with the caregiver mobile app for this client.\n                </p>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/crm/GanttView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/crm/LeadTable.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[338,341],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[338,341],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport { getContacts } from '@/lib/actions';\nimport { exportLeadsAction } from '@/lib/actions/crm';\nimport { useSip } from '@/lib/contexts/SipContext';\n\nexport default function LeadTable() {\n    const { makeCall } = useSip();\n    const [contacts, setContacts] = useState<any[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [exporting, setExporting] = useState(false);\n\n    useEffect(() => {\n        async function loadContacts() {\n            try {\n                const data = await getContacts();\n                setContacts(data);\n            } catch (error) {\n                console.error('Failed to load contacts:', error);\n            } finally {\n                setLoading(false);\n            }\n        }\n        loadContacts();\n    }, []);\n\n    const handleExport = async () => {\n        setExporting(true);\n        try {\n            const result = await exportLeadsAction();\n            if (result.error) {\n                alert(result.error);\n                return;\n            }\n            if (result.data) {\n                const blob = new Blob([result.data], { type: 'text/csv;charset=utf-8;' });\n                const url = URL.createObjectURL(blob);\n                const link = document.createElement('a');\n                link.setAttribute('href', url);\n                link.setAttribute('download', `leads_export_${new Date().toISOString().split('T')[0]}.csv`);\n                link.style.visibility = 'hidden';\n                document.body.appendChild(link);\n                link.click();\n                document.body.removeChild(link);\n            }\n        } catch (error) {\n            console.error('Export failed:', error);\n            alert('Failed to export leads');\n        } finally {\n            setExporting(false);\n        }\n    };\n\n    if (loading) return <div style={{ padding: '2rem', textAlign: 'center', color: 'var(--text-muted)' }}>Loading contacts...</div>;\n\n    return (\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\n            <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\n                <button\n                    onClick={handleExport}\n                    disabled={exporting}\n                    className=\"btn-primary\"\n                    style={{\n                        padding: '8px 16px',\n                        fontSize: '0.85rem',\n                        opacity: exporting ? 0.7 : 1,\n                        cursor: exporting ? 'not-allowed' : 'pointer'\n                    }}\n                >\n                    {exporting ? 'Exporting...' : 'Export CSV'}\n                </button>\n            </div>\n            <div className=\"glass\" style={{ overflow: 'hidden' }}>\n                <table style={{ width: '100%', borderCollapse: 'collapse', textAlign: 'left' }}>\n                    <thead>\n                        <tr style={{ borderBottom: '1px solid var(--glass-border)', background: 'rgba(255,255,255,0.02)' }}>\n                            <th style={{ padding: '1rem', fontSize: '0.85rem', color: 'var(--text-muted)' }}>Name</th>\n                            <th style={{ padding: '1rem', fontSize: '0.85rem', color: 'var(--text-muted)' }}>Company</th>\n                            <th style={{ padding: '1rem', fontSize: '0.85rem', color: 'var(--text-muted)' }}>Email</th>\n                            <th style={{ padding: '1rem', fontSize: '0.85rem', color: 'var(--text-muted)' }}>Status</th>\n                            <th style={{ padding: '1rem', fontSize: '0.85rem', color: 'var(--text-muted)' }}>Deals</th>\n                            <th style={{ padding: '1rem', fontSize: '0.85rem', color: 'var(--text-muted)' }}>Actions</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {contacts.map(contact => (\n                            <tr key={contact.id} className=\"glass-hover\" style={{ borderBottom: '1px solid var(--glass-border)' }}>\n                                <td style={{ padding: '1rem', fontWeight: '500' }}>\n                                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n                                        {contact.firstName} {contact.lastName}\n                                        <button\n                                            onClick={() => makeCall(contact.phone || '')}\n                                            style={{ background: 'transparent', border: 'none', cursor: 'pointer', opacity: 0.6, fontSize: '1rem' }}\n                                            title=\"Click to Call\"\n                                        >\n                                            üìû\n                                        </button>\n                                    </div>\n                                </td>\n                                <td style={{ padding: '1rem', color: 'var(--text-muted)' }}>{contact.company || 'N/A'}</td>\n                                <td style={{ padding: '1rem', color: 'var(--text-muted)' }}>{contact.email}</td>\n                                <td style={{ padding: '1rem' }}>\n                                    <span style={{\n                                        padding: '2px 8px',\n                                        borderRadius: '12px',\n                                        fontSize: '0.7rem',\n                                        fontWeight: 'bold',\n                                        background: contact.status === 'HOT' ? 'rgba(239, 68, 68, 0.1)' : contact.status === 'LEAD' ? 'rgba(245, 158, 11, 0.1)' : 'rgba(16, 185, 129, 0.1)',\n                                        color: contact.status === 'HOT' ? 'var(--error)' : contact.status === 'LEAD' ? 'var(--warning)' : 'var(--success)',\n                                        border: `1px solid ${contact.status === 'HOT' ? 'var(--error)' : contact.status === 'LEAD' ? 'var(--warning)' : 'var(--success)'}33`\n                                    }}>\n                                        {contact.status}\n                                    </span>\n                                </td>\n                                <td style={{ padding: '1rem', fontWeight: '600' }}>{contact.deals?.length || 0}</td>\n                                <td style={{ padding: '1rem' }}>\n                                    <button style={{ background: 'transparent', border: 'none', color: 'var(--primary)', cursor: 'pointer', fontSize: '0.85rem' }}>View</button>\n                                </td>\n                            </tr>\n                        ))}\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/crm/PipelineBoard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used.","line":3,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState } from 'react';\n\nconst STAGES = ['Prospecting', 'Qualification', 'Proposal', 'Negotiation', 'Closed Won'];\n\n// Shared text removed, updating signature\ninterface Deal {\n    id: string;\n    title: string;\n    value: string;\n    company: string;\n    stage: string;\n    // adding optional props to match shared type if needed\n    owner?: string;\n    startDate?: string;\n    endDate?: string;\n}\n\nexport default function PipelineBoard({ deals }: { deals: Deal[] }) {\n    // const [deals, setDeals] = useState(INITIAL_DEALS); // Removing internal state init\n\n    return (\n        <div style={{ display: 'flex', gap: '1rem', overflowX: 'auto', paddingBottom: '1rem' }}>\n            {STAGES.map(stage => (\n                <div key={stage} style={{ minWidth: '280px', flex: 1 }}>\n                    <div style={{\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        alignItems: 'center',\n                        marginBottom: '1rem',\n                        padding: '0.5rem 1rem',\n                        background: 'rgba(255,255,255,0.03)',\n                        borderRadius: '6px'\n                    }}>\n                        <h4 style={{ fontSize: '0.9rem', fontWeight: '600' }}>{stage}</h4>\n                        <span style={{ fontSize: '0.75rem', color: 'var(--text-muted)' }}>\n                            {deals.filter(d => d.stage === stage).length}\n                        </span>\n                    </div>\n\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '0.75rem' }}>\n                        {deals.filter(d => d.stage === stage).map(deal => (\n                            <div key={deal.id} className=\"glass glass-hover\" style={{ padding: '1rem', cursor: 'pointer' }}>\n                                <div style={{ fontWeight: '600', marginBottom: '0.25rem' }}>{deal.title}</div>\n                                <div style={{ fontSize: '0.8rem', color: 'var(--text-muted)', marginBottom: '0.75rem' }}>{deal.company}</div>\n                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                                    <span style={{ color: 'var(--accent)', fontWeight: 'bold' }}>{deal.value}</span>\n                                    <div style={{ width: '24px', height: '24px', borderRadius: '12px', background: 'var(--glass-border)', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '0.7rem' }}>üë§</div>\n                                </div>\n                            </div>\n                        ))}\n\n                        <button className=\"glass-hover\" style={{\n                            width: '100%',\n                            padding: '0.75rem',\n                            border: '1px dashed var(--glass-border)',\n                            borderRadius: '8px',\n                            background: 'transparent',\n                            color: 'var(--text-muted)',\n                            fontSize: '0.85rem',\n                            cursor: 'pointer'\n                        }}>\n                            + Add Deal\n                        </button>\n                    </div>\n                </div>\n            ))}\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/crm/TaskList.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":7,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[204,207],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[204,207],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport { getTasks, updateTaskStatus } from '@/lib/actions';\n\nexport default function TaskList() {\n    const [tasks, setTasks] = useState<any[]>([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        async function loadTasks() {\n            try {\n                const data = await getTasks();\n                setTasks(data);\n            } catch (error) {\n                console.error(error);\n            } finally {\n                setLoading(false);\n            }\n        }\n        loadTasks();\n    }, []);\n\n    const handleToggle = async (id: string, currentStatus: string) => {\n        const newStatus = currentStatus === 'COMPLETED' ? 'OPEN' : 'COMPLETED';\n        try {\n            await updateTaskStatus(id, newStatus);\n            setTasks(prev => prev.map(t => t.id === id ? { ...t, status: newStatus } : t));\n        } catch (error) {\n            console.error(error);\n        }\n    };\n\n    if (loading) return <div style={{ color: 'var(--text-muted)', fontSize: '0.85rem' }}>Loading...</div>;\n\n    return (\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '0.75rem' }}>\n            {tasks.length === 0 ? (\n                <div style={{ color: 'var(--text-muted)', fontSize: '0.85rem' }}>No pending tasks.</div>\n            ) : (\n                tasks.map((task) => (\n                    <div key={task.id} style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', padding: '0.5rem', borderRadius: '8px', background: 'rgba(255,255,255,0.02)' }}>\n                        <input\n                            type=\"checkbox\"\n                            checked={task.status === 'COMPLETED'}\n                            onChange={() => handleToggle(task.id, task.status)}\n                            style={{ accentColor: 'var(--primary)', width: '16px', height: '16px' }}\n                        />\n                        <div style={{ flex: 1 }}>\n                            <div style={{ fontSize: '0.85rem', color: task.status === 'COMPLETED' ? 'var(--text-muted)' : 'var(--text-main)', textDecoration: task.status === 'COMPLETED' ? 'line-through' : 'none' }}>\n                                {task.title}\n                            </div>\n                            {task.dueDate && <div style={{ fontSize: '0.65rem', color: 'var(--error)' }}>Due: {new Date(task.dueDate).toLocaleDateString()}</div>}\n                        </div>\n                    </div>\n                ))\n            )}\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/crm/templates/AdminCompliance.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/crm/templates/ManufacturingDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/crm/templates/NursePortal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/crm/templates/PersonalCareDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":4,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ClipboardList' is defined but never used.","line":4,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":55}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React from 'react';\nimport { HeartPulse, Calendar, UserPlus, ClipboardList, ShieldCheck, FileWarning, Clock } from 'lucide-react';\nimport LeadTable from '@/components/crm/LeadTable';\n\nexport default function PersonalCareDashboard() {\n    return (\n        <div className=\"fade-in\">\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(240px, 1fr))', gap: '1.5rem', marginBottom: '2rem' }}>\n                <div className=\"glass p-6 text-card-foreground\">\n                    <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '0.5rem' }}>\n                        <span style={{ fontSize: '0.875rem', fontWeight: 500 }}>Active Clients</span>\n                        <HeartPulse size={16} style={{ color: 'var(--text-muted)' }} />\n                    </div>\n                    <div style={{ fontSize: '1.5rem', fontWeight: 'bold' }}>124</div>\n                    <div style={{ fontSize: '0.75rem', color: 'var(--text-muted)' }}>+2 this week</div>\n                </div>\n                <div className=\"glass p-6 text-card-foreground\">\n                    <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '0.5rem' }}>\n                        <span style={{ fontSize: '0.875rem', fontWeight: 500 }}>Visits Today</span>\n                        <Clock size={16} style={{ color: 'var(--text-muted)' }} />\n                    </div>\n                    <div style={{ fontSize: '1.5rem', fontWeight: 'bold' }}>42</div>\n                    <div style={{ fontSize: '0.75rem', color: 'var(--text-muted)' }}>12 in progress</div>\n                </div>\n                <div className=\"glass p-6 text-card-foreground\">\n                    <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '0.5rem' }}>\n                        <span style={{ fontSize: '0.875rem', fontWeight: 500 }}>Pending Intake</span>\n                        <UserPlus size={16} style={{ color: 'var(--text-muted)' }} />\n                    </div>\n                    <div style={{ fontSize: '1.5rem', fontWeight: 'bold' }}>8</div>\n                    <div style={{ fontSize: '0.75rem', color: 'var(--text-muted)' }}>Needs Assessment</div>\n                </div>\n                <div className=\"glass p-6 text-card-foreground\">\n                    <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '0.5rem' }}>\n                        <span style={{ fontSize: '0.875rem', fontWeight: 500 }}>Expiring Auths</span>\n                        <FileWarning size={16} style={{ color: 'var(--error)' }} />\n                    </div>\n                    <div style={{ fontSize: '1.5rem', fontWeight: 'bold' }}>5</div>\n                    <div style={{ fontSize: '0.75rem', color: 'var(--text-muted)' }}>Next 7 days</div>\n                </div>\n            </div>\n\n            <div style={{ display: 'grid', gridTemplateColumns: '2fr 1fr', gap: '2rem' }}>\n                <div className=\"glass\" style={{ padding: '1.5rem' }}>\n                    <h3 style={{ marginBottom: '1rem', fontSize: '1.25rem', fontWeight: '600' }}>Recent Visits</h3>\n                    <table style={{ width: '100%', borderCollapse: 'collapse' }}>\n                        <thead>\n                            <tr style={{ borderBottom: '1px solid var(--glass-border)', textAlign: 'left' }}>\n                                <th style={{ padding: '0.75rem', color: 'var(--text-muted)', fontWeight: '500' }}>Client</th>\n                                <th style={{ padding: '0.75rem', color: 'var(--text-muted)', fontWeight: '500' }}>Caregiver</th>\n                                <th style={{ padding: '0.75rem', color: 'var(--text-muted)', fontWeight: '500' }}>Service</th>\n                                <th style={{ padding: '0.75rem', color: 'var(--text-muted)', fontWeight: '500' }}>Status</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {[\n                                { client: 'John Doe', caregiver: 'Alice Johnson', service: 'Personal Care', status: 'In Progress' },\n                                { client: 'Jane Roe', caregiver: 'Bob Smith', service: 'Respite Care', status: 'Completed' },\n                                { client: 'Richard Miles', caregiver: 'Carol White', service: 'HHA', status: 'Completed' },\n                                { client: 'Sarah Connor', caregiver: 'Alice Johnson', service: 'Personal Care', status: 'Scheduled' },\n                            ].map((visit, i) => (\n                                <tr key={i} style={{ borderBottom: '1px solid var(--glass-border)' }}>\n                                    <td style={{ padding: '0.75rem' }}>{visit.client}</td>\n                                    <td style={{ padding: '0.75rem' }}>{visit.caregiver}</td>\n                                    <td style={{ padding: '0.75rem' }}>{visit.service}</td>\n                                    <td style={{ padding: '0.75rem' }}>\n                                        <span style={{\n                                            padding: '0.25rem 0.5rem',\n                                            borderRadius: '9999px',\n                                            fontSize: '0.75rem',\n                                            background: visit.status === 'In Progress' ? 'rgba(34, 197, 94, 0.1)' : 'rgba(107, 114, 128, 0.1)',\n                                            color: visit.status === 'In Progress' ? 'var(--success)' : 'var(--text-muted)'\n                                        }}>\n                                            {visit.status}\n                                        </span>\n                                    </td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                </div>\n\n                <div className=\"glass\" style={{ padding: '1.5rem' }}>\n                    <h3 style={{ marginBottom: '1.5rem', fontSize: '1.25rem', fontWeight: '600', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n                        <ShieldCheck size={20} className=\"text-primary\" /> Compliance Alerts\n                    </h3>\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\n                        {[\n                            { name: 'Alice Johnson', issue: 'CPR License Expired', date: '2 days ago', severity: 'high' },\n                            { name: 'Bob Smith', issue: 'TB Test Renewal Due', date: 'In 5 days', severity: 'medium' },\n                            { name: 'Office Staff', issue: 'New Hire Training', date: 'Tomorrow', severity: 'low' },\n                        ].map((alert, i) => (\n                            <div key={i} style={{\n                                padding: '1rem',\n                                borderRadius: '8px',\n                                background: 'rgba(255,255,255,0.03)',\n                                borderLeft: `4px solid ${alert.severity === 'high' ? 'var(--error)' : alert.severity === 'medium' ? 'var(--warning)' : 'var(--primary)'}`\n                            }}>\n                                <div style={{ fontSize: '0.9rem', fontWeight: '600' }}>{alert.name}</div>\n                                <div style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>{alert.issue}</div>\n                                <div style={{ fontSize: '0.7rem', color: 'var(--text-muted)', marginTop: '0.4rem' }}>{alert.date}</div>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n            </div>\n            <div style={{ marginTop: '2rem' }}>\n                <h3 style={{ marginBottom: '1.5rem', fontSize: '1.25rem', fontWeight: '600' }}>Active Contacts & Leads</h3>\n                <LeadTable />\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/crm/templates/SalesDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/dashboard/DashboardCustomizer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/dashboard/DashboardWidgets.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[129,132],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[129,132],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":69,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":69,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3686,3689],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3686,3689],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":96,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":96,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5248,5251],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5248,5251],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":149,"column":91,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[8445,8458],"text":"Today&apos;s Calls"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[8445,8458],"text":"Today&lsquo;s Calls"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[8445,8458],"text":"Today&#39;s Calls"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[8445,8458],"text":"Today&rsquo;s Calls"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\n\nexport function MorningCoffeeWidget({ stats }: { stats: any }) {\n    return (\n        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '1.5rem', gridColumn: '1 / -1' }}>\n            {/* Missed Visits */}\n            <div className=\"glass\" style={{ padding: '1.5rem', borderLeft: stats.missedVisits > 0 ? '4px solid var(--error)' : '4px solid var(--success)' }}>\n                <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '0.5rem' }}>\n                    <span style={{ fontSize: '0.8rem', color: 'var(--text-muted)', fontWeight: 'bold' }}>MISSED VISITS</span>\n                    <span>‚ö†Ô∏è</span>\n                </div>\n                <div style={{ fontSize: '2rem', fontWeight: 'bold', color: stats.missedVisits > 0 ? 'var(--error)' : 'inherit' }}>\n                    {stats.missedVisits}\n                </div>\n            </div>\n\n            {/* Expiring Authorizations */}\n            <div className=\"glass\" style={{ padding: '1.5rem', borderLeft: stats.expiringAuths > 0 ? '4px solid var(--warning)' : '4px solid var(--success)' }}>\n                <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '0.5rem' }}>\n                    <span style={{ fontSize: '0.8rem', color: 'var(--text-muted)', fontWeight: 'bold' }}>EXPIRING AUTHS</span>\n                    <span>üìÖ</span>\n                </div>\n                <div style={{ fontSize: '2rem', fontWeight: 'bold' }}>\n                    {stats.expiringAuths}\n                </div>\n            </div>\n\n            {/* Unbilled Verified Visits */}\n            <div className=\"glass\" style={{ padding: '1.5rem', borderLeft: '4px solid var(--accent)' }}>\n                <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '0.5rem' }}>\n                    <span style={{ fontSize: '0.8rem', color: 'var(--text-muted)', fontWeight: 'bold' }}>UNBILLED VERIFIED</span>\n                    <span>üí∞</span>\n                </div>\n                <div style={{ fontSize: '2rem', fontWeight: 'bold', color: 'var(--accent)' }}>\n                    {stats.unbilledVerified}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport function CRMMetricsWidget({ deals, value }: { deals: number, value: string }) {\n    return (\n        <div className=\"glass\" style={{ padding: '1.5rem' }}>\n            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '1rem' }}>\n                <h3 style={{ fontSize: '1rem' }}>CRM Overview</h3>\n                <span>üìä</span>\n            </div>\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '0.75rem' }}>\n                <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n                    <span style={{ color: 'var(--text-muted)', fontSize: '0.9rem' }}>Open Deals</span>\n                    <span style={{ fontWeight: 'bold' }}>{deals}</span>\n                </div>\n                <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n                    <span style={{ color: 'var(--text-muted)', fontSize: '0.9rem' }}>Pipeline Value</span>\n                    <span style={{ fontWeight: 'bold', color: 'var(--accent)' }}>{value}</span>\n                </div>\n            </div>\n            <Link href=\"/dashboard/crm\" className=\"btn-primary\" style={{ display: 'block', textAlign: 'center', fontSize: '0.8rem', marginTop: '1rem', padding: '0.4rem' }}>\n                Go to CRM\n            </Link>\n        </div>\n    );\n}\n\nexport function PayrollWatchdogWidget({ caregivers }: { caregivers: any[] }) {\n    return (\n        <div className=\"glass\" style={{ padding: '1.5rem' }}>\n            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '1rem' }}>\n                <h3 style={{ fontSize: '1rem' }}>Payroll Highlights</h3>\n                <span>üõ°Ô∏è</span>\n            </div>\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '0.75rem' }}>\n                {caregivers.slice(0, 3).map(cg => (\n                    <div key={cg.id}>\n                        <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '0.85rem', marginBottom: '0.2rem' }}>\n                            <span>{cg.name}</span>\n                            <span style={{ color: cg.totalHours >= 38 ? 'var(--warning)' : 'inherit' }}>{cg.totalHours}h</span>\n                        </div>\n                        <div style={{ width: '100%', height: '4px', background: 'rgba(255,255,255,0.05)', borderRadius: '2px' }}>\n                            <div style={{ width: `${Math.min((cg.totalHours / 40) * 100, 100)}%`, height: '100%', background: cg.totalHours >= 38 ? 'var(--warning)' : 'var(--accent)' }} />\n                        </div>\n                    </div>\n                ))}\n            </div>\n            <Link href=\"/dashboard/payroll\" className=\"btn-primary\" style={{ display: 'block', textAlign: 'center', fontSize: '0.8rem', marginTop: '1rem', padding: '0.4rem' }}>\n                All Payroll\n            </Link>\n        </div>\n    );\n}\n\nexport function BillingAttentionWidget({ visits }: { visits: any[] }) {\n    if (visits.length === 0) return null;\n    return (\n        <div className=\"glass\" style={{ padding: '1.5rem', gridColumn: '1 / -1', border: '1px solid rgba(255,68,68,0.2)' }}>\n            <h3 style={{ fontSize: '1rem', marginBottom: '1rem', color: 'var(--error)' }}>‚óè Billing Attention Required ({visits.length})</h3>\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\n                {visits.slice(0, 3).map(v => (\n                    <div key={v.id} style={{ display: 'flex', justifyContent: 'space-between', fontSize: '0.85rem', background: 'rgba(255,255,255,0.02)', padding: '0.5rem', borderRadius: '4px' }}>\n                        <span>{v.client.firstName} {v.client.lastName}</span>\n                        <span style={{ color: 'var(--error)' }}>{v.errors.length} errors</span>\n                    </div>\n                ))}\n            </div>\n            <Link href=\"/dashboard/evv\" style={{ display: 'block', marginTop: '1rem', fontSize: '0.8rem', color: 'var(--accent)', textDecoration: 'none' }}>\n                View all errors ‚Üí\n            </Link>\n        </div>\n    );\n}\n\nexport function FaxStatusWidget({ newFaxes, total }: { newFaxes: number, total: number }) {\n    return (\n        <div className=\"glass\" style={{ padding: '1.5rem' }}>\n            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '1rem' }}>\n                <h3 style={{ fontSize: '1rem' }}>Fax Status</h3>\n                <span>üì†</span>\n            </div>\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '0.75rem' }}>\n                <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n                    <span style={{ color: 'var(--text-muted)', fontSize: '0.9rem' }}>New Faxes</span>\n                    <span style={{ fontWeight: 'bold', color: 'var(--success)' }}>{newFaxes}</span>\n                </div>\n                <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n                    <span style={{ color: 'var(--text-muted)', fontSize: '0.9rem' }}>Recent Activity</span>\n                    <span style={{ fontWeight: 'bold' }}>{total}</span>\n                </div>\n            </div>\n            <Link href=\"/dashboard/fax\" className=\"btn-primary\" style={{ display: 'block', textAlign: 'center', fontSize: '0.8rem', marginTop: '1rem', padding: '0.4rem', background: 'rgba(255,255,255,0.1)', color: 'white', border: '1px solid var(--glass-border)' }}>\n                Fax Inbox\n            </Link>\n        </div>\n    );\n}\n\nexport function VoIPActivityWidget({ calls, missed }: { calls: number, missed: number }) {\n    return (\n        <div className=\"glass\" style={{ padding: '1.5rem' }}>\n            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '1rem' }}>\n                <h3 style={{ fontSize: '1rem' }}>Call Log</h3>\n                <span>üìû</span>\n            </div>\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '0.75rem' }}>\n                <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n                    <span style={{ color: 'var(--text-muted)', fontSize: '0.9rem' }}>Today's Calls</span>\n                    <span style={{ fontWeight: 'bold' }}>{calls}</span>\n                </div>\n                <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n                    <span style={{ color: 'var(--text-muted)', fontSize: '0.9rem' }}>Missed</span>\n                    <span style={{ fontWeight: 'bold', color: 'var(--error)' }}>{missed}</span>\n                </div>\n            </div>\n            <Link href=\"/dashboard/phone\" className=\"btn-primary\" style={{ display: 'block', textAlign: 'center', fontSize: '0.8rem', marginTop: '1rem', padding: '0.4rem', background: 'linear-gradient(135deg, var(--accent), #3b82f6)' }}>\n                Open Dialer\n            </Link>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/email/EmailConfigForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/email/EmailDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/fax/FaxComposer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":72,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2559,2562],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2559,2562],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState } from 'react';\nimport { sendFax } from '@/lib/actions';\nimport { Eye, FileText as FileIcon } from 'lucide-react';\nimport FileViewer from '../FileViewer';\n\nexport default function FaxComposer() {\n    const [loading, setLoading] = useState(false);\n    const [viewerOpen, setViewerOpen] = useState(false);\n    const [previewUrl, setPreviewUrl] = useState<string | null>(null);\n\n    // Fax Data State\n    const [faxData, setFaxData] = useState({\n        recipient: '',\n        sender: 'John Doe',\n        priority: 'NORMAL',\n        file: null as File | null\n    });\n\n    // Cover Sheet State\n    const [useCoverSheet, setUseCoverSheet] = useState(false);\n    const [coverSheet, setCoverSheet] = useState({\n        to: '',\n        from: 'John Doe',\n        subject: '',\n        comments: ''\n    });\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!faxData.recipient) return alert('Recipient is required');\n\n        setLoading(true);\n        try {\n            let fileContent = '';\n            let fileName = '';\n\n            if (faxData.file) {\n                fileName = faxData.file.name;\n                // Convert file to base64\n                const reader = new FileReader();\n                fileContent = await new Promise((resolve) => {\n                    reader.onload = (e) => {\n                        const result = e.target?.result as string;\n                        // Remove data URL prefix (e.g., \"data:application/pdf;base64,\")\n                        const base64 = result.split(',')[1];\n                        resolve(base64);\n                    };\n                    reader.readAsDataURL(faxData.file as File);\n                });\n            }\n\n            const result = await sendFax({\n                recipient: faxData.recipient,\n                sender: faxData.sender,\n                priority: faxData.priority,\n                fileContent,\n                fileName,\n                coverSheet: useCoverSheet ? coverSheet : undefined\n            });\n\n            if (result.success) {\n                alert('Fax sent successfully!');\n                alert('Fax sent successfully!');\n                setFaxData({ ...faxData, recipient: '', file: null });\n                setPreviewUrl(null);\n                setUseCoverSheet(false);\n                setCoverSheet({ to: '', from: 'John Doe', subject: '', comments: '' });\n                window.location.reload();\n            } else {\n                alert('Failed to send fax: ' + (result as any).error); // Type cast if needed depending on return type\n            }\n        } catch (error) {\n            console.error(error);\n            alert('Failed to send fax');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"glass\" style={{ padding: '2rem' }}>\n            <h2 style={{ fontSize: '1.25rem', marginBottom: '1.5rem' }}>Send New Fax</h2>\n            <form onSubmit={handleSubmit} style={{ display: 'flex', flexDirection: 'column', gap: '1.5rem' }}>\n                <div>\n                    <label style={{ display: 'block', fontSize: '0.85rem', color: 'var(--text-muted)', marginBottom: '0.5rem' }}>Recipient Number</label>\n                    <input\n                        type=\"text\"\n                        placeholder=\"+1 (555) 000-0000\"\n                        value={faxData.recipient}\n                        onChange={(e) => setFaxData({ ...faxData, recipient: e.target.value })}\n                        style={{\n                            width: '100%',\n                            padding: '0.75rem',\n                            borderRadius: '8px',\n                            background: 'rgba(255,255,255,0.05)',\n                            border: '1px solid var(--glass-border)',\n                            color: 'var(--text-main)',\n                            outline: 'none'\n                        }}\n                        disabled={loading}\n                    />\n                </div>\n\n                <div>\n                    <label style={{ display: 'block', fontSize: '0.85rem', color: 'var(--text-muted)', marginBottom: '0.5rem' }}>Priority</label>\n                    <select\n                        value={faxData.priority}\n                        onChange={(e) => setFaxData({ ...faxData, priority: e.target.value })}\n                        style={{\n                            width: '100%',\n                            padding: '0.75rem',\n                            borderRadius: '8px',\n                            background: 'rgba(255,255,255,0.05)',\n                            border: '1px solid var(--glass-border)',\n                            color: 'var(--text-main)',\n                            outline: 'none'\n                        }}\n                        disabled={loading}\n                    >\n                        <option value=\"NORMAL\">Normal</option>\n                        <option value=\"HIGH\">High Priority</option>\n                    </select>\n                </div>\n\n                <div style={{\n                    border: '2px dashed var(--glass-border)',\n                    borderRadius: '12px',\n                    padding: '2rem',\n                    textAlign: 'center',\n                    cursor: loading ? 'not-allowed' : 'pointer',\n                    position: 'relative'\n                }}>\n                    <input\n                        type=\"file\"\n                        accept=\".pdf,.tif,.tiff\"\n                        onChange={(e) => setFaxData({ ...faxData, file: e.target.files ? e.target.files[0] : null })}\n                        style={{\n                            position: 'absolute',\n                            top: 0,\n                            left: 0,\n                            width: '100%',\n                            height: '100%',\n                            opacity: 0,\n                            cursor: 'pointer'\n                        }}\n                        disabled={loading}\n                    />\n                    <div style={{ fontSize: '2rem', marginBottom: '0.5rem' }}>üìÑ</div>\n                    <div style={{ fontSize: '0.9rem', color: 'var(--text-muted)' }}>\n                        {faxData.file ? faxData.file.name : 'Click to upload or drag & drop PDF/TIFF'}\n                    </div>\n                    {faxData.file && (\n                        <button\n                            type=\"button\"\n                            onClick={(e) => {\n                                e.stopPropagation();\n                                if (faxData.file) {\n                                    const url = URL.createObjectURL(faxData.file);\n                                    setPreviewUrl(url);\n                                    setViewerOpen(true);\n                                }\n                            }}\n                            className=\"glass-hover\"\n                            style={{\n                                marginTop: '1rem',\n                                padding: '0.5rem 1rem',\n                                borderRadius: '6px',\n                                border: '1px solid var(--glass-border)',\n                                background: 'transparent',\n                                color: 'var(--text-main)',\n                                cursor: 'pointer',\n                                display: 'flex',\n                                alignItems: 'center',\n                                gap: '0.5rem',\n                                margin: '1rem auto 0'\n                            }}\n                        >\n                            <Eye size={16} /> Preview Document\n                        </button>\n                    )}\n                </div>\n\n                <div className=\"glass\" style={{ padding: '1.5rem' }}>\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: useCoverSheet ? '1rem' : '0' }}>\n                        <h3 style={{ fontSize: '1rem', margin: 0, display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n                            <FileIcon size={18} /> Add Cover Sheet\n                        </h3>\n                        {/* Toggle Switch */}\n                        <label style={{ position: 'relative', display: 'inline-block', width: '40px', height: '20px' }}>\n                            <input\n                                type=\"checkbox\"\n                                checked={useCoverSheet}\n                                onChange={(e) => setUseCoverSheet(e.target.checked)}\n                                style={{ opacity: 0, width: 0, height: 0 }}\n                            />\n                            <span style={{\n                                position: 'absolute', cursor: 'pointer', top: 0, left: 0, right: 0, bottom: 0,\n                                backgroundColor: useCoverSheet ? 'var(--accent)' : '#ccc', borderRadius: '34px', transition: '.4s'\n                            }}></span>\n                            <span style={{\n                                position: 'absolute', content: '\"\"', height: '16px', width: '16px', left: '2px', bottom: '2px',\n                                backgroundColor: 'white', borderRadius: '50%', transition: '.4s',\n                                transform: useCoverSheet ? 'translateX(20px)' : 'translateX(0)'\n                            }}></span>\n                        </label>\n                    </div>\n\n                    {useCoverSheet && (\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\n                            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' }}>\n                                <div>\n                                    <label style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>To</label>\n                                    <input\n                                        type=\"text\"\n                                        placeholder=\"Recipient Name\"\n                                        value={coverSheet.to}\n                                        onChange={(e) => setCoverSheet({ ...coverSheet, to: e.target.value })}\n                                        className=\"input-glass\"\n                                        style={{ width: '100%', padding: '0.5rem', borderRadius: '6px', marginTop: '0.25rem' }}\n                                    />\n                                </div>\n                                <div>\n                                    <label style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>From</label>\n                                    <input\n                                        type=\"text\"\n                                        placeholder=\"Your Name\"\n                                        value={coverSheet.from}\n                                        onChange={(e) => setCoverSheet({ ...coverSheet, from: e.target.value })}\n                                        className=\"input-glass\"\n                                        style={{ width: '100%', padding: '0.5rem', borderRadius: '6px', marginTop: '0.25rem' }}\n                                    />\n                                </div>\n                            </div>\n                            <div>\n                                <label style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>Subject</label>\n                                <input\n                                    type=\"text\"\n                                    placeholder=\"Fax Subject\"\n                                    value={coverSheet.subject}\n                                    onChange={(e) => setCoverSheet({ ...coverSheet, subject: e.target.value })}\n                                    className=\"input-glass\"\n                                    style={{ width: '100%', padding: '0.5rem', borderRadius: '6px', marginTop: '0.25rem' }}\n                                />\n                            </div>\n                            <div>\n                                <label style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>Comments</label>\n                                <textarea\n                                    placeholder=\"Message/Comments...\"\n                                    rows={4}\n                                    value={coverSheet.comments}\n                                    onChange={(e) => setCoverSheet({ ...coverSheet, comments: e.target.value })}\n                                    className=\"input-glass\"\n                                    style={{ width: '100%', padding: '0.5rem', borderRadius: '6px', marginTop: '0.25rem', resize: 'vertical' }}\n                                />\n                            </div>\n                        </div>\n                    )}\n                </div>\n\n                <button\n                    type=\"submit\"\n                    className=\"btn-primary\"\n                    style={{ padding: '1rem', opacity: loading ? 0.7 : 1 }}\n                    disabled={loading}\n                >\n                    {loading ? 'Sending...' : 'Queue Fax for Delivery'}\n                </button>\n            </form>\n\n            <FileViewer\n                isOpen={viewerOpen}\n                onClose={() => setViewerOpen(false)}\n                fileUrl={previewUrl}\n                fileName={faxData.file?.name}\n                fileType={faxData.file?.type}\n            />\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/fax/FaxInbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/forms/FormBuilderDialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'GripVertical' is defined but never used.","line":4,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState } from 'react';\nimport { Plus, X, GripVertical, Save, Trash2 } from 'lucide-react';\nimport { createForm } from '@/lib/actions/forms';\n\nconst FIELD_TYPES = [\n    { value: 'TEXT', label: 'Short Text', icon: 'abc' },\n    { value: 'NUMBER', label: 'Number', icon: '123' },\n    { value: 'DATE', label: 'Date', icon: 'üìÖ' },\n    { value: 'SIGNATURE', label: 'Signature Pad', icon: '‚úçÔ∏è' },\n    { value: 'SELECT', label: 'Dropdown Selection', icon: 'üîΩ' },\n];\n\ninterface Field {\n    label: string;\n    type: string;\n    required: boolean;\n    options?: string;\n}\n\nexport default function FormBuilderDialog() {\n    const [isOpen, setIsOpen] = useState(false);\n    const [title, setTitle] = useState('');\n    const [description, setDescription] = useState('');\n    const [fields, setFields] = useState<Field[]>([]);\n    const [loading, setLoading] = useState(false);\n\n    const addField = () => {\n        setFields([...fields, { label: 'New Field', type: 'TEXT', required: false }]);\n    };\n\n    const removeField = (index: number) => {\n        setFields(fields.filter((_, i) => i !== index));\n    };\n\n    const updateField = (index: number, updates: Partial<Field>) => {\n        const newFields = [...fields];\n        newFields[index] = { ...newFields[index], ...updates };\n        setFields(newFields);\n    };\n\n    const handleSave = async () => {\n        if (!title) return alert('Title is required');\n        if (fields.length === 0) return alert('Add at least one field');\n\n        setLoading(true);\n        try {\n            await createForm(title, description, fields);\n            setIsOpen(false);\n            setTitle('');\n            setDescription('');\n            setFields([]);\n        } catch (error) {\n            console.error(error);\n            alert('Failed to save form');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    if (!isOpen) {\n        return (\n            <button onClick={() => setIsOpen(true)} className=\"btn-primary\" style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n                <Plus size={18} /> New Form\n            </button>\n        );\n    }\n\n    return (\n        <div style={{\n            position: 'fixed', inset: 0, background: 'rgba(0,0,0,0.8)', backdropFilter: 'blur(8px)',\n            display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 2000, padding: '2rem'\n        }}>\n            <div className=\"glass\" style={{ width: '100%', maxWidth: '800px', maxHeight: '90vh', display: 'flex', flexDirection: 'column', overflow: 'hidden' }}>\n                <div style={{ padding: '1.5rem', borderBottom: '1px solid var(--glass-border)', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                    <h2 style={{ fontSize: '1.5rem', margin: 0 }}>Create New No-Code Form</h2>\n                    <button onClick={() => setIsOpen(false)} style={{ background: 'transparent', border: 'none', color: '#fff', cursor: 'pointer' }}>\n                        <X size={24} />\n                    </button>\n                </div>\n\n                <div style={{ flex: 1, overflowY: 'auto', padding: '2rem' }}>\n                    <div style={{ marginBottom: '2rem' }}>\n                        <label style={{ display: 'block', marginBottom: '0.5rem', fontSize: '0.9rem', color: 'var(--text-muted)' }}>Form Title</label>\n                        <input\n                            value={title}\n                            onChange={(e) => setTitle(e.target.value)}\n                            placeholder=\"e.g., ADL Daily Monitoring\"\n                            style={{ width: '100%', background: 'rgba(255,255,255,0.05)', border: '1px solid var(--glass-border)', padding: '0.75rem', borderRadius: '8px', color: '#fff' }}\n                        />\n                    </div>\n\n                    <div style={{ marginBottom: '2.5rem' }}>\n                        <label style={{ display: 'block', marginBottom: '0.5rem', fontSize: '0.9rem', color: 'var(--text-muted)' }}>Description (Optional)</label>\n                        <textarea\n                            value={description}\n                            onChange={(e) => setDescription(e.target.value)}\n                            placeholder=\"Explain the purpose of this form...\"\n                            style={{ width: '100%', background: 'rgba(255,255,255,0.05)', border: '1px solid var(--glass-border)', padding: '0.75rem', borderRadius: '8px', color: '#fff', resize: 'vertical' }}\n                        />\n                    </div>\n\n                    <div style={{ marginBottom: '1.5rem', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                        <h3 style={{ fontSize: '1.1rem', margin: 0 }}>Form Fields</h3>\n                        <button onClick={addField} className=\"btn-ghost\" style={{ fontSize: '0.85rem', display: 'flex', alignItems: 'center', gap: '0.4rem' }}>\n                            <Plus size={16} /> Add Field\n                        </button>\n                    </div>\n\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\n                        {fields.map((field, index) => (\n                            <div key={index} className=\"glass\" style={{ padding: '1rem', background: 'rgba(255,255,255,0.02)', display: 'grid', gridTemplateColumns: '1fr 1fr auto auto', gap: '1rem', alignItems: 'end' }}>\n                                <div>\n                                    <label style={{ fontSize: '0.75rem', color: 'var(--text-muted)', display: 'block', marginBottom: '0.25rem' }}>Field Label</label>\n                                    <input\n                                        value={field.label}\n                                        onChange={(e) => updateField(index, { label: e.target.value })}\n                                        style={{ width: '100%', background: 'rgba(0,0,0,0.2)', border: '1px solid var(--glass-border)', padding: '0.5rem', borderRadius: '4px', color: '#fff' }}\n                                    />\n                                </div>\n                                <div>\n                                    <label style={{ fontSize: '0.75rem', color: 'var(--text-muted)', display: 'block', marginBottom: '0.25rem' }}>Field Type</label>\n                                    <select\n                                        value={field.type}\n                                        onChange={(e) => updateField(index, { type: e.target.value })}\n                                        style={{ width: '100%', background: 'rgba(0,0,0,0.2)', border: '1px solid var(--glass-border)', padding: '0.5rem', borderRadius: '4px', color: '#fff' }}\n                                    >\n                                        {FIELD_TYPES.map(t => <option key={t.value} value={t.value} style={{ color: 'black' }}>{t.label}</option>)}\n                                    </select>\n                                </div>\n                                <div style={{ marginBottom: '0.5rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n                                    <input\n                                        type=\"checkbox\"\n                                        checked={field.required}\n                                        onChange={(e) => updateField(index, { required: e.target.checked })}\n                                    />\n                                    <span style={{ fontSize: '0.75rem' }}>Req.</span>\n                                </div>\n                                <button onClick={() => removeField(index)} style={{ background: 'transparent', border: 'none', color: 'var(--error)', cursor: 'pointer', marginBottom: '0.5rem' }}>\n                                    <Trash2 size={18} />\n                                </button>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n\n                <div style={{ padding: '1.5rem', borderTop: '1px solid var(--glass-border)', display: 'flex', justifyContent: 'flex-end', gap: '1rem' }}>\n                    <button onClick={() => setIsOpen(false)} style={{ background: 'transparent', border: 'none', color: 'var(--text-muted)', cursor: 'pointer' }}>Cancel</button>\n                    <button onClick={handleSave} disabled={loading} className=\"btn-primary\" style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', padding: '0.75rem 2rem' }}>\n                        <Save size={18} /> {loading ? 'Saving...' : 'Publish Form'}\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/payroll/ExportButtons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/settings/AddModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/settings/FaxSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":3,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getCurrentUser' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { saveSRFaxConfigAction } from '@/lib/actions/settings';\nimport { getCurrentUser } from '@/lib/auth'; // Note: This might need to be a server action or passed as prop\n\nexport default function FaxSettings({ userId }: { userId: string }) {\n    const [config, setConfig] = useState({\n        accountId: '',\n        password: ''\n    });\n    const [loading, setLoading] = useState(false);\n    const [message, setMessage] = useState('');\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setLoading(true);\n        setMessage('');\n\n        const result = await saveSRFaxConfigAction(userId, config);\n\n        if (result.error) {\n            setMessage('Error: ' + result.error);\n        } else {\n            setMessage('SRFax settings saved successfully!');\n        }\n        setLoading(false);\n    };\n\n    return (\n        <div className=\"glass\" style={{ padding: '2rem' }}>\n            <h3 style={{ marginBottom: '1.5rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n                üì† SRFax Configuration\n            </h3>\n            <form onSubmit={handleSubmit} style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\n                <div>\n                    <label style={{ display: 'block', fontSize: '0.85rem', color: 'var(--text-muted)', marginBottom: '0.5rem' }}>Account ID</label>\n                    <input\n                        type=\"text\"\n                        value={config.accountId}\n                        onChange={(e) => setConfig({ ...config, accountId: e.target.value })}\n                        className=\"input-glass\"\n                        placeholder=\"e.g. 123456\"\n                        required\n                        style={{ width: '100%', padding: '0.75rem', borderRadius: '8px' }}\n                    />\n                </div>\n                <div>\n                    <label style={{ display: 'block', fontSize: '0.85rem', color: 'var(--text-muted)', marginBottom: '0.5rem' }}>API Password</label>\n                    <input\n                        type=\"password\"\n                        value={config.password}\n                        onChange={(e) => setConfig({ ...config, password: e.target.value })}\n                        className=\"input-glass\"\n                        placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                        required\n                        style={{ width: '100%', padding: '0.75rem', borderRadius: '8px' }}\n                    />\n                    <p style={{ fontSize: '0.75rem', color: 'var(--text-muted)', marginTop: '0.5rem' }}>\n                        This password is encrypted before being stored.\n                    </p>\n                </div>\n                <button\n                    type=\"submit\"\n                    className=\"btn-primary\"\n                    disabled={loading}\n                    style={{ marginTop: '1rem', padding: '0.75rem' }}\n                >\n                    {loading ? 'Saving...' : 'Update SRFax Credentials'}\n                </button>\n                {message && (\n                    <div style={{\n                        marginTop: '1rem',\n                        padding: '0.75rem',\n                        borderRadius: '6px',\n                        fontSize: '0.85rem',\n                        background: message.startsWith('Error') ? 'rgba(239,68,68,0.1)' : 'rgba(34,197,94,0.1)',\n                        color: message.startsWith('Error') ? 'var(--error)' : 'var(--success)',\n                        border: message.startsWith('Error') ? '1px solid var(--error)' : '1px solid var(--success)'\n                    }}>\n                        {message}\n                    </div>\n                )}\n            </form>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/settings/ModuleSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":79,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3371,3374],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3371,3374],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":87,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":87,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3771,3774],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3771,3774],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":100,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4440,4443],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4440,4443],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport { getModuleConfigAction, updateModuleConfigAction } from '@/lib/actions/settings';\n\ninterface ModuleConfig {\n    id: string;\n    crmEnabled: boolean;\n    emailEnabled: boolean;\n    voipEnabled: boolean;\n    faxEnabled: boolean;\n    storageEnabled: boolean;\n}\n\nexport default function ModuleSettings({ organizationId }: { organizationId: string }) {\n    const [config, setConfig] = useState<ModuleConfig | null>(null);\n    const [loading, setLoading] = useState(true);\n    const [saving, setSaving] = useState(false);\n\n    useEffect(() => {\n        async function loadConfig() {\n            const result = await getModuleConfigAction(organizationId);\n            if (result && result.data) {\n                setConfig(result.data as ModuleConfig);\n            }\n            setLoading(false);\n        }\n        loadConfig();\n    }, [organizationId]);\n\n    const toggleModule = async (module: keyof Omit<ModuleConfig, 'id'>) => {\n        if (!config) return;\n\n        const newConfig = { ...config, [module]: !config[module] };\n        setConfig(newConfig);\n        setSaving(true);\n\n        const result = await updateModuleConfigAction(config.id, { [module]: newConfig[module] });\n        if (result.error) {\n            alert(result.error);\n            setConfig(config); // Revert on error\n        }\n        setSaving(false);\n    };\n\n    if (loading) return <div style={{ color: 'var(--text-muted)' }}>Loading settings...</div>;\n    if (!config) return <div style={{ color: 'var(--error)' }}>Failed to load configuration.</div>;\n\n    const modules = [\n        { id: 'crmEnabled', label: 'CRM System', icon: 'üìä', desc: 'Customer and lead management' },\n        { id: 'emailEnabled', label: 'Email Suite', icon: 'üìß', desc: 'IMAP/SMTP business email' },\n        { id: 'voipEnabled', label: 'VoIP Phone', icon: 'üìû', desc: 'SIP-based communication' },\n        { id: 'faxEnabled', label: 'Digital Fax', icon: 'üì†', desc: 'SRFax API integration' },\n        { id: 'storageEnabled', label: 'Enterprise Storage', icon: 'üìÅ', desc: 'Secure file management' },\n    ];\n\n    return (\n        <div className=\"glass\" style={{ padding: '2rem' }}>\n            <h3 style={{ marginBottom: '1.5rem' }}>Module Management</h3>\n            <div style={{ display: 'grid', gap: '1rem' }}>\n                {modules.map((m) => (\n                    <div key={m.id} style={{\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'space-between',\n                        padding: '1rem',\n                        background: 'rgba(255,255,255,0.02)',\n                        borderRadius: '12px',\n                        border: '1px solid var(--glass-border)'\n                    }}>\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>\n                            <span style={{ fontSize: '1.5rem' }}>{m.icon}</span>\n                            <div>\n                                <div style={{ fontWeight: 'bold' }}>{m.label}</div>\n                                <div style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>{m.desc}</div>\n                            </div>\n                        </div>\n                        <button\n                            onClick={() => toggleModule(m.id as any)}\n                            disabled={saving}\n                            data-testid={`toggle-${m.id}`}\n                            style={{\n                                width: '48px',\n                                height: '24px',\n                                borderRadius: '12px',\n                                border: 'none',\n                                background: (config as any)[m.id] ? 'var(--success)' : 'rgba(255,255,255,0.1)',\n                                position: 'relative',\n                                cursor: 'pointer',\n                                transition: 'all 0.3s ease'\n                            }}\n                        >\n                            <div style={{\n                                width: '20px',\n                                height: '20px',\n                                borderRadius: '10px',\n                                background: '#fff',\n                                position: 'absolute',\n                                top: '2px',\n                                left: (config as any)[m.id] ? '26px' : '2px',\n                                transition: 'all 0.3s ease'\n                            }} />\n                        </button>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/storage/FileExplorer.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Users' is defined but never used.","line":15,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setCurrentFolder' is assigned a value but never used.","line":31,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":43}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState } from 'react';\nimport {\n    Folder,\n    FileText,\n    Image as ImageIcon,\n    MoreVertical,\n    Plus,\n    Search,\n    Star,\n    Clock,\n    Trash2,\n    HardDrive,\n    Users,\n    LayoutGrid,\n    List,\n    ChevronRight\n} from 'lucide-react';\n\nconst MOCK_FILES = [\n    { id: '1', name: 'Annual Report 2024.pdf', type: 'PDF', size: '2.4 MB', updated: '2 hours ago', starred: true },\n    { id: '2', name: 'Product Designs', type: 'FOLDER', size: '-', updated: 'Yesterday', starred: false },\n    { id: '3', name: 'Q4 Revenue.xlsx', type: 'EXCEL', size: '450 KB', updated: 'Dec 15', starred: false },\n    { id: '4', name: 'Main Hero Image.png', type: 'IMG', size: '5.6 MB', updated: 'Dec 12', starred: true },\n    { id: '5', name: 'Customer List', type: 'FOLDER', size: '-', updated: 'Nov 20', starred: false },\n];\n\nexport default function FileExplorer() {\n    const [view, setView] = useState<'grid' | 'list'>('grid');\n    const [currentFolder, setCurrentFolder] = useState<string[]>(['My Drive']);\n\n    const getIcon = (type: string) => {\n        switch (type) {\n            case 'FOLDER': return <Folder className=\"text-blue-400\" fill=\"currentColor\" size={24} />;\n            case 'PDF': return <FileText className=\"text-red-400\" size={24} />;\n            case 'IMG': return <ImageIcon className=\"text-purple-400\" size={24} />;\n            default: return <FileText className=\"text-gray-400\" size={24} />;\n        }\n    };\n\n    return (\n        <div style={{ display: 'flex', height: 'calc(100vh - 120px)', gap: '1rem' }}>\n            {/* Sidebar */}\n            <div className=\"glass\" style={{ width: '240px', padding: '1.5rem', display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\n                <button className=\"btn-primary\" style={{ marginBottom: '1.5rem', display: 'flex', alignItems: 'center', gap: '0.5rem', padding: '12px' }}>\n                    <Plus size={20} /> New\n                </button>\n\n                {[\n                    { icon: HardDrive, label: 'My Drive', active: true },\n                    { icon: Clock, label: 'Recent', active: false },\n                    { icon: Star, label: 'Starred', active: false },\n                    { icon: Trash2, label: 'Trash', active: false },\n                ].map(item => (\n                    <div key={item.label} className=\"glass-hover\" style={{\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: '0.75rem',\n                        padding: '0.75rem 1rem',\n                        borderRadius: '8px',\n                        background: item.active ? 'rgba(255,255,255,0.05)' : 'transparent',\n                        color: item.active ? 'var(--primary)' : 'var(--text-muted)',\n                        cursor: 'pointer'\n                    }}>\n                        <item.icon size={18} />\n                        <span style={{ fontSize: '0.9rem' }}>{item.label}</span>\n                    </div>\n                ))}\n\n                <div style={{ marginTop: 'auto', padding: '1rem', borderTop: '1px solid var(--glass-border)' }}>\n                    <div style={{ fontSize: '0.75rem', color: 'var(--text-muted)', marginBottom: '0.5rem' }}>Storage</div>\n                    <div style={{ height: '4px', background: 'rgba(255,255,255,0.1)', borderRadius: '2px', marginBottom: '0.5rem' }}>\n                        <div style={{ width: '45%', height: '100%', background: 'var(--primary)', borderRadius: '2px' }} />\n                    </div>\n                    <div style={{ fontSize: '0.7rem', color: 'var(--text-muted)' }}>4.5 GB of 10 GB used</div>\n                </div>\n            </div>\n\n            {/* Main Content */}\n            <div className=\"glass\" style={{ flex: 1, display: 'flex', flexDirection: 'column', padding: '1.5rem' }}>\n                {/* Header */}\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1.5rem' }}>\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', fontSize: '1.1rem' }}>\n                        {currentFolder.map((folder, i) => (\n                            <React.Fragment key={folder}>\n                                {i > 0 && <ChevronRight size={16} className=\"text-muted\" />}\n                                <span style={{ cursor: 'pointer', fontWeight: i === currentFolder.length - 1 ? '600' : '400' }}>{folder}</span>\n                            </React.Fragment>\n                        ))}\n                    </div>\n\n                    <div style={{ display: 'flex', gap: '0.5rem', background: 'rgba(255,255,255,0.05)', padding: '4px', borderRadius: '8px' }}>\n                        <button\n                            onClick={() => setView('grid')}\n                            style={{ background: view === 'grid' ? 'rgba(255,255,255,0.1)' : 'transparent', border: 'none', padding: '4px', borderRadius: '4px', color: '#fff', cursor: 'pointer' }}\n                        >\n                            <LayoutGrid size={18} />\n                        </button>\n                        <button\n                            onClick={() => setView('list')}\n                            style={{ background: view === 'list' ? 'rgba(255,255,255,0.1)' : 'transparent', border: 'none', padding: '4px', borderRadius: '4px', color: '#fff', cursor: 'pointer' }}\n                        >\n                            <List size={18} />\n                        </button>\n                    </div>\n                </div>\n\n                {/* Search */}\n                <div className=\"glass\" style={{ marginBottom: '2rem', display: 'flex', alignItems: 'center', gap: '0.75rem', padding: '0.75rem 1rem' }}>\n                    <Search size={18} className=\"text-muted\" />\n                    <input type=\"text\" placeholder=\"Search in Drive\" style={{ background: 'transparent', border: 'none', color: '#fff', width: '100%', outline: 'none' }} />\n                </div>\n\n                {/* Explorer */}\n                {view === 'grid' ? (\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))', gap: '1.5rem', overflowY: 'auto' }}>\n                        {MOCK_FILES.map(item => (\n                            <div key={item.id} className=\"glass glass-hover\" style={{ padding: '1rem', position: 'relative' }}>\n                                <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '1rem' }}>\n                                    {getIcon(item.type)}\n                                    <MoreVertical size={16} className=\"text-muted\" />\n                                </div>\n                                <div style={{ fontWeight: '500', fontSize: '0.9rem', marginBottom: '0.25rem', whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }}>{item.name}</div>\n                                <div style={{ fontSize: '0.75rem', color: 'var(--text-muted)' }}>{item.updated}</div>\n                            </div>\n                        ))}\n                    </div>\n                ) : (\n                    <div style={{ overflowX: 'auto' }}>\n                        <table style={{ width: '100%', borderCollapse: 'collapse' }}>\n                            <thead>\n                                <tr style={{ textAlign: 'left', color: 'var(--text-muted)', fontSize: '0.85rem', borderBottom: '1px solid var(--glass-border)' }}>\n                                    <th style={{ padding: '0.75rem' }}>Name</th>\n                                    <th style={{ padding: '0.75rem' }}>Owner</th>\n                                    <th style={{ padding: '0.75rem' }}>Last modified</th>\n                                    <th style={{ padding: '0.75rem' }}>File size</th>\n                                    <th style={{ padding: '0.75rem' }}></th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {MOCK_FILES.map(item => (\n                                    <tr key={item.id} className=\"glass-hover\" style={{ borderBottom: '1px solid var(--glass-border)', fontSize: '0.9rem' }}>\n                                        <td style={{ padding: '0.75rem', display: 'flex', alignItems: 'center', gap: '1rem' }}>\n                                            {getIcon(item.type)}\n                                            {item.name}\n                                        </td>\n                                        <td style={{ padding: '0.75rem' }}>Me</td>\n                                        <td style={{ padding: '0.75rem' }}>{item.updated}</td>\n                                        <td style={{ padding: '0.75rem' }}>{item.size}</td>\n                                        <td style={{ padding: '0.75rem' }}><MoreVertical size={16} /></td>\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </table>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/voip/CallWindow.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[324,327],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[324,327],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport { useSip } from '@/lib/contexts/SipContext';\n\nexport default function CallWindow() {\n    const { state, endCall, toggleHold, answerCall, rejectCall } = useSip();\n    const [timer, setTimer] = useState(0);\n\n    useEffect(() => {\n        let interval: any;\n        if (state.activeCall && state.callDetails?.status === 'CONNECTED') {\n            interval = setInterval(() => {\n                setTimer(prev => prev + 1);\n            }, 1000);\n        }\n        return () => clearInterval(interval);\n    }, [state.activeCall, state.callDetails?.status]);\n\n    if (!state.activeCall || !state.callDetails) return null;\n\n    const formatTime = (s: number) => {\n        const mins = Math.floor(s / 60);\n        const secs = s % 60;\n        return `${mins}:${secs.toString().padStart(2, '0')}`;\n    };\n\n    return (\n        <div className=\"glass fade-in\" style={{\n            position: 'fixed',\n            bottom: '2rem',\n            right: '2rem',\n            width: '320px',\n            padding: '2rem',\n            zIndex: 100,\n            background: 'rgba(5, 7, 10, 0.95)',\n            boxShadow: '0 20px 50px rgba(0,0,0,0.6)',\n            border: '1px solid var(--primary)'\n        }}>\n            <div style={{ textAlign: 'center', marginBottom: '2rem' }}>\n                <div style={{\n                    width: '64px',\n                    height: '64px',\n                    borderRadius: '32px',\n                    background: state.callDetails.status === 'RINGING' ? 'var(--accent)' : 'var(--primary-glow)',\n                    margin: '0 auto 1rem',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    fontSize: '2rem',\n                    animation: state.callDetails.status === 'RINGING' ? 'pulse 1.5s infinite' : 'none'\n                }}>\n                    üë§\n                </div>\n                <h3 style={{ marginBottom: '0.25rem' }}>{state.callDetails.number}</h3>\n                <div style={{ fontSize: '0.85rem', color: 'var(--text-muted)' }}>\n                    {state.callDetails.status === 'HELD' ? 'On Hold' :\n                        state.callDetails.status === 'RINGING' ? 'Incoming Call...' :\n                            'In Call ‚Ä¢ ' + formatTime(timer)}\n                </div>\n            </div>\n\n            {state.callDetails.status === 'RINGING' ? (\n                <div style={{ display: 'flex', gap: '1rem' }}>\n                    <button\n                        onClick={rejectCall}\n                        style={{\n                            flex: 1,\n                            padding: '1rem',\n                            borderRadius: '12px',\n                            background: 'var(--error)',\n                            color: 'white',\n                            fontWeight: 'bold',\n                            border: 'none',\n                            cursor: 'pointer'\n                        }}\n                    >\n                        Decline\n                    </button>\n                    <button\n                        onClick={answerCall}\n                        style={{\n                            flex: 1,\n                            padding: '1rem',\n                            borderRadius: '12px',\n                            background: 'var(--success)',\n                            color: 'white',\n                            fontWeight: 'bold',\n                            border: 'none',\n                            cursor: 'pointer'\n                        }}\n                    >\n                        Answer\n                    </button>\n                </div>\n            ) : (\n                <>\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '1rem', marginBottom: '2rem' }}>\n                        {[\n                            { icon: 'üé§', label: 'Mute' },\n                            { icon: '‚è∏', label: state.callDetails.status === 'HELD' ? 'Resume' : 'Hold', action: toggleHold },\n                            { icon: '‚ûï', label: 'Add' },\n                        ].map((btn, i) => (\n                            <button\n                                key={i}\n                                onClick={btn.action}\n                                className=\"glass-hover\"\n                                style={{\n                                    display: 'flex',\n                                    flexDirection: 'column',\n                                    alignItems: 'center',\n                                    gap: '0.5rem',\n                                    padding: '0.75rem',\n                                    borderRadius: '8px',\n                                    background: 'rgba(255,255,255,0.05)',\n                                    border: '1px solid var(--glass-border)',\n                                    color: 'var(--text-main)',\n                                    fontSize: '0.75rem',\n                                    cursor: 'pointer'\n                                }}\n                            >\n                                <span style={{ fontSize: '1.2rem' }}>{btn.icon}</span>\n                                {btn.label}\n                            </button>\n                        ))}\n                    </div>\n\n                    <button\n                        onClick={endCall}\n                        style={{\n                            width: '100%',\n                            padding: '1rem',\n                            borderRadius: '12px',\n                            background: 'var(--error)',\n                            color: 'white',\n                            fontWeight: 'bold',\n                            border: 'none',\n                            cursor: 'pointer'\n                        }}\n                    >\n                        End Call\n                    </button>\n                </>\n            )}\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/voip/Dialer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/voip/FloatingDialer.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":3,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":36}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { useSip } from '@/lib/contexts/SipContext';\nimport { Phone, PhoneOff, Mic, X, Star } from 'lucide-react';\n\nexport default function FloatingDialer() {\n    const { state, makeCall, endCall } = useSip();\n    const [phoneNumber, setPhoneNumber] = useState('');\n    const [isExpanded, setIsExpanded] = useState(false);\n\n    // Simplified: manual expansion only for now to avoid cascading render lint\n    // In real app, we'd use a more complex state sync or ref\n\n    if (!isExpanded && !state.activeCall) {\n        return (\n            <button\n                onClick={() => setIsExpanded(true)}\n                className=\"glass glass-hover\"\n                data-testid=\"floating-dialer-btn\"\n                style={{\n                    position: 'fixed',\n                    bottom: '2rem',\n                    right: '2rem',\n                    width: '60px',\n                    height: '60px',\n                    borderRadius: '30px',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    background: 'var(--primary)',\n                    color: '#fff',\n                    boxShadow: '0 8px 32px rgba(0,0,0,0.3)',\n                    zIndex: 1000,\n                }}\n            >\n                <Phone size={24} />\n            </button>\n        );\n    }\n\n    return (\n        <div className=\"glass fade-in\" style={{\n            position: 'fixed',\n            bottom: '2rem',\n            right: '2rem',\n            width: '320px',\n            padding: '1.5rem',\n            zIndex: 1000,\n            background: 'rgba(15, 23, 42, 0.95)',\n            backdropFilter: 'blur(20px)',\n            boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.5)',\n            display: 'flex',\n            flexDirection: 'column',\n            gap: '1rem'\n        }}>\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                <h4 style={{ margin: 0, fontSize: '1rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n                    <Phone size={16} className=\"text-primary\" /> Dialer\n                </h4>\n                <button\n                    onClick={() => setIsExpanded(false)}\n                    style={{ background: 'transparent', border: 'none', color: 'var(--text-muted)', cursor: 'pointer' }}\n                    disabled={state.activeCall}\n                >\n                    <X size={18} />\n                </button>\n            </div>\n\n            {state.activeCall ? (\n                <div style={{ textAlign: 'center', padding: '1rem' }}>\n                    <div style={{ fontSize: '1.5rem', fontWeight: 'bold', marginBottom: '0.5rem' }}>{state.callDetails?.number}</div>\n                    <div style={{ color: 'var(--success)', fontSize: '0.9rem', marginBottom: '1.5rem' }}>Connected</div>\n\n                    <div style={{ display: 'flex', justifyContent: 'center', gap: '1.5rem' }}>\n                        <button className=\"glass glass-hover\" style={{ width: '48px', height: '48px', borderRadius: '24px', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n                            <Mic size={20} />\n                        </button>\n                        <button\n                            onClick={endCall}\n                            style={{ width: '60px', height: '60px', borderRadius: '30px', background: 'var(--error)', color: '#fff', border: 'none', display: 'flex', alignItems: 'center', justifyContent: 'center', cursor: 'pointer' }}\n                        >\n                            <PhoneOff size={24} />\n                        </button>\n                        <button className=\"glass glass-hover\" style={{ width: '48px', height: '48px', borderRadius: '24px', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n                            <Star size={20} />\n                        </button>\n                    </div>\n                </div>\n            ) : (\n                <>\n                    <input\n                        type=\"text\"\n                        className=\"glass\"\n                        style={{ width: '100%', padding: '1rem', fontSize: '1.25rem', textAlign: 'center', marginBottom: '1rem' }}\n                        placeholder=\"Enter number\"\n                        value={phoneNumber}\n                        onChange={(e) => setPhoneNumber(e.target.value)}\n                    />\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '0.5rem', marginBottom: '1rem' }}>\n                        {[1, 2, 3, 4, 5, 6, 7, 8, 9, '*', 0, '#'].map(num => (\n                            <button\n                                key={num}\n                                onClick={() => setPhoneNumber(prev => prev + num)}\n                                className=\"glass-hover\"\n                                data-testid={`keypad-${num}`}\n                                style={{ padding: '12px', borderRadius: '8px', border: '1px solid var(--glass-border)', background: 'transparent', color: '#fff', cursor: 'pointer' }}\n                            >\n                                {num}\n                            </button>\n                        ))}\n                    </div>\n                    <button\n                        onClick={() => makeCall(phoneNumber)}\n                        className=\"btn-primary\"\n                        style={{ width: '100%', padding: '1rem', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '1rem' }}\n                    >\n                        <Phone size={20} /> Call\n                    </button>\n                </>\n            )}\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/components/voip/SipConfigForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/lib/actions.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[609,612],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[609,612],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":35,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[823,826],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[823,826],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":79,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2145,2148],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2145,2148],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":86,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2389,2392],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2389,2392],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":101,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":101,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2806,2809],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2806,2809],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use server';\n\nimport { prisma } from './db';\nimport { getCurrentUser } from './auth';\nimport { revalidatePath } from 'next/cache';\n\nimport { sendViaSRFax } from './fax';\n\n// --- Fax Actions ---\nexport async function sendFax(formData: {\n    recipient: string;\n    sender: string;\n    priority: string;\n    fileContent: string; // Base64\n    fileName: string;\n    coverSheet?: {\n        to: string;\n        from: string;\n        subject: string;\n        comments: string;\n    };\n}) {\n    const user = await getCurrentUser();\n    if (!user) throw new Error('Unauthorized');\n\n    const config = await (prisma as any).sRFaxConfig.findUnique({\n        where: { userId: user.id }\n    });\n\n    let faxStatus = 'QUEUED';\n    let remoteJobId: string | null = null;\n\n    if (config) {\n        // Real API call\n        const payload: any = {\n            accountId: config.accountId,\n            password: config.password,\n            recipient: formData.recipient,\n            sender: formData.sender,\n            priority: formData.priority,\n            file: formData.fileContent\n        };\n\n        if (formData.coverSheet) {\n            console.log(\"Adding cover sheet to request:\", formData.coverSheet);\n        }\n\n        const result = await sendViaSRFax(payload);\n\n        if (result.success) {\n            faxStatus = 'QUEUED'; // SRFax returns Success when queued\n            remoteJobId = String(result.jobId);\n        } else {\n            faxStatus = 'FAILED';\n            console.error(\"Fax failed to send:\", result.error);\n        }\n    }\n\n    const fax = await prisma.fax.create({\n        data: {\n            recipient: formData.recipient,\n            sender: formData.sender,\n            direction: 'OUTBOUND',\n            status: faxStatus,\n            remoteJobId,\n            userId: user.id,\n            organizationId: user.organizationId\n        }\n    });\n\n    revalidatePath('/dashboard/fax');\n    return { success: faxStatus !== 'FAILED', fax };\n}\n\nexport async function syncFaxStatus() {\n    const user = await getCurrentUser();\n    if (!user) return { success: false, error: 'Unauthorized' };\n\n    const config = await (prisma as any).sRFaxConfig.findUnique({\n        where: { userId: user.id }\n    });\n\n    if (!config) return { success: false, error: 'No SRFax config found' };\n\n    // Find faxes that are not in a final state\n    const activeFaxes = await (prisma.fax as any).findMany({\n        where: {\n            userId: user.id,\n            status: { in: ['QUEUED', 'IN_PROCESS', 'SENT'] },\n            direction: 'OUTBOUND',\n            remoteJobId: { not: null }\n        }\n    });\n\n    let updatedCount = 0;\n\n    for (const fax of activeFaxes) {\n        if (!fax.remoteJobId) continue;\n\n        const statusResponse = await (await import('./fax')).getFaxStatus(\n            (fax as any).remoteJobId,\n            config.accountId,\n            config.password\n        );\n\n        // Map SRFax statuses: QUEUED, IN_PROCESS, SENT (to provider), COMPLETED (delivered), FAILED\n        let newStatus = fax.status;\n        if (statusResponse === 'Sent') {\n            newStatus = 'DELIVERED';\n        } else if (statusResponse === 'Failed') {\n            newStatus = 'FAILED';\n        } else if (statusResponse === 'Queued') {\n            newStatus = 'QUEUED';\n        } else if (statusResponse === 'In Process') {\n            newStatus = 'IN_PROCESS';\n        }\n\n        if (newStatus !== fax.status) {\n            await prisma.fax.update({\n                where: { id: fax.id },\n                data: { status: newStatus }\n            });\n            updatedCount++;\n        }\n    }\n\n    revalidatePath('/dashboard/fax');\n    return { success: true, updated: updatedCount };\n}\n\nexport async function getFaxes() {\n    const user = await getCurrentUser();\n    if (!user) return [];\n\n    return prisma.fax.findMany({\n        where: { userId: user.id },\n        orderBy: { createdAt: 'desc' }\n    });\n}\n\n// --- CRM Actions ---\nexport async function getContacts() {\n    const user = await getCurrentUser();\n    if (!user) return [];\n\n    return prisma.contact.findMany({\n        where: { organizationId: user.organizationId },\n        include: {\n            deals: true,\n            tasks: { where: { status: 'OPEN' } },\n            activities: { take: 10, orderBy: { createdAt: 'desc' } }\n        }\n    });\n}\n\nexport async function createContact(data: {\n    firstName: string;\n    lastName: string;\n    email: string;\n    phone?: string;\n    company?: string;\n}) {\n    const user = await getCurrentUser();\n    if (!user) throw new Error('Unauthorized');\n\n    const contact = await prisma.contact.create({\n        data: {\n            ...data,\n            userId: user.id,\n            status: 'LEAD', // Default status\n            organizationId: user.organizationId\n        }\n    });\n\n    revalidatePath('/dashboard/crm');\n    return contact;\n}\n\nexport async function getTasks() {\n    const user = await getCurrentUser();\n    if (!user) return [];\n\n    return prisma.task.findMany({\n        where: { userId: user.id },\n        include: { contact: true, deal: true },\n        orderBy: { dueDate: 'asc' }\n    });\n}\n\nexport async function createActivity(data: {\n    type: string;\n    content: string;\n    contactId?: string;\n    dealId?: string;\n}) {\n    const user = await getCurrentUser();\n    if (!user) throw new Error('Unauthorized');\n\n    const activity = await prisma.activity.create({\n        data: {\n            ...data,\n            userId: user.id,\n            organizationId: user.organizationId\n        }\n    });\n    revalidatePath('/dashboard/crm');\n    return activity;\n}\n\nexport async function updateTaskStatus(taskId: string, status: string) {\n    const user = await getCurrentUser();\n    if (!user) throw new Error('Unauthorized');\n\n    const task = await prisma.task.update({\n        where: { id: taskId, userId: user.id },\n        data: { status }\n    });\n    revalidatePath('/dashboard/crm');\n    return task;\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/lib/actions/admin.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/lib/actions/audit.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/lib/actions/billing.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/lib/actions/crm.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/lib/actions/email.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[850,853],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[850,853],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":52,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1873,1876],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1873,1876],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use server';\n\nimport { ImapFlow } from 'imapflow';\nimport { prisma } from '@/lib/db';\n\nexport async function getRealEmailsAction(userId: string) {\n    try {\n        const account = await prisma.emailAccount.findFirst({\n            where: { userId, isActive: true },\n        });\n\n        if (!account) {\n            return { error: 'No active email account configured. Please go to settings.' };\n        }\n\n        const client = new ImapFlow({\n            host: account.imapHost,\n            port: account.imapPort,\n            secure: account.imapPort === 993,\n            auth: {\n                user: account.username,\n                pass: account.password,\n            },\n            logger: false,\n        });\n\n        await client.connect();\n\n        const lock = await client.getMailboxLock('INBOX');\n        try {\n            const emails: any[] = [];\n            // Fetch the last 10 emails\n            for await (const msg of client.fetch('1:10', { envelope: true, bodyStructure: true, flags: true })) {\n                if (msg.envelope) {\n                    emails.push({\n                        id: msg.uid.toString(),\n                        sender: msg.envelope.from?.[0]?.name || msg.envelope.from?.[0]?.address || 'Unknown',\n                        email: msg.envelope.from?.[0]?.address || 'Unknown',\n                        subject: msg.envelope.subject || '(No Subject)',\n                        date: msg.envelope.date?.toISOString() || new Date().toISOString(),\n                        preview: '',\n                        isStarred: msg.flags?.has('\\\\Starred') || false,\n                        isUnread: !msg.flags?.has('\\\\Seen'),\n                    });\n                }\n            }\n            return { data: emails.reverse() };\n        } finally {\n            lock.release();\n            await client.logout();\n        }\n    } catch (error: any) {\n        console.error('IMAP Error:', error);\n        return { error: `Failed to fetch emails: ${error.message}` };\n    }\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/lib/actions/evv.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[671,674],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[671,674],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[684,687],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[684,687],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":172,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":172,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5432,5435],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5432,5435],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":216,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":216,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6811,6814],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6811,6814],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":232,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":232,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7477,7480],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7477,7480],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":237,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":237,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7618,7621],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7618,7621],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":242,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":242,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7812,7815],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7812,7815],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'user' is assigned a value but never used.","line":291,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":291,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":302,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":302,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9551,9554],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9551,9554],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use server';\n\nimport { prisma } from '@/lib/db';\nimport { getCurrentUser } from '@/lib/auth';\nimport { revalidatePath } from 'next/cache';\n\n// --- Helpers ---\n\n/**\n * Wisconsin Standard 15-minute unit conversion (8-minute rule variant)\n * 8-22 mins = 1 unit\n * 23-37 mins = 2 units\n * 38-52 mins = 3 units\n * 53-67 mins = 4 units\n */\nexport async function calculateWisconsinUnits(start: Date, end: Date): Promise<number> {\n    const diffMs = end.getTime() - start.getTime();\n    const minutes = Math.floor(diffMs / 60000);\n\n    if (minutes < 8) return 0;\n    return 1 + Math.floor((minutes - 8) / 15);\n}\n\n// --- Sandata Sync Stub ---\nasync function pushToSandata(visit: any, config: any) {\n    // This is where we would implement the specific SOAP/REST call to Sandata\n    // Endpoint: https://api.sandata.com/interfaces/intake/... (Example)\n\n    // Mocking the interaction\n    console.log(`[Sandata Sync] Pushing Visit ${visit.id} to Agency ${config.agencyId}`);\n    console.log(`[Sandata Sync] Data:`, {\n        StaffID: visit.caregiver.nationalProviderId || visit.caregiver.providerSSN || visit.caregiver.id,\n        PatientID: visit.client.medicaidId || visit.clientId,\n        VisitStartParams: {\n            Date: visit.startDateTime,\n            Latitude: visit.startLatitude,\n            Longitude: visit.startLongitude\n        },\n        VisitEndParams: {\n            Date: visit.endDateTime,\n            Latitude: visit.endLatitude,\n            Longitude: visit.endLongitude\n        },\n        Units: visit.startDateTime && visit.endDateTime ? await calculateWisconsinUnits(visit.startDateTime, visit.endDateTime) : 0\n    });\n\n    // Simulate network delay and response\n    await new Promise(resolve => setTimeout(resolve, 1500));\n\n    // Mock success\n    return {\n        success: true,\n        transactionId: `STX-${Date.now()}-${Math.floor(Math.random() * 1000)}`\n    };\n}\n\n// --- Actions ---\n\nexport async function getDashboardStats() {\n    const user = await getCurrentUser();\n    if (!user || !user.organizationId) throw new Error('Unauthorized');\n\n    const now = new Date();\n    const oneHourAgo = new Date(now.getTime() - (60 * 60 * 1000));\n\n    // 1. Missed Visits (SCHEDULED and startDateTime < oneHourAgo)\n    const missedVisits = await prisma.visit.count({\n        where: {\n            organizationId: user.organizationId,\n            status: 'SCHEDULED',\n            startDateTime: { lt: oneHourAgo }\n        }\n    });\n\n    // 2. Expiring Authorizations (Ends within 14 days)\n    const fourteenDaysFromNow = new Date(now.getTime() + (14 * 24 * 60 * 60 * 1000));\n    const expiringAuths = await prisma.authorization.count({\n        where: {\n            organizationId: user.organizationId,\n            status: 'ACTIVE',\n            endDate: { lte: fourteenDaysFromNow }\n        }\n    });\n\n    // 3. Unbilled Verified Visits (VERIFIED status, not yet submitted)\n    // For this MVP, we consider 'VERIFIED' as ready for billing.\n    const unbilledVerified = await prisma.visit.count({\n        where: {\n            organizationId: user.organizationId,\n            status: 'VERIFIED'\n        }\n    });\n\n    return {\n        missedVisits,\n        expiringAuths,\n        unbilledVerified\n    };\n}\n\nexport async function getEvvStatus() {\n    const user = await getCurrentUser();\n    if (!user) throw new Error('Unauthorized');\n\n    // Find active visit for this user\n    const activeVisit = await prisma.visit.findFirst({\n        where: {\n            caregiverId: user.id,\n            status: 'IN_PROGRESS'\n        },\n        include: { client: true }\n    });\n\n    return { activeVisit };\n}\n\nexport async function startVisit(clientId: string, lat: number, lng: number, serviceType: string) {\n    const user = await getCurrentUser();\n    if (!user) throw new Error('Unauthorized');\n    if (!user.organizationId) throw new Error('No Organization');\n\n    // Check if already in a visit\n    const existing = await prisma.visit.findFirst({\n        where: { caregiverId: user.id, status: 'IN_PROGRESS' }\n    });\n\n    if (existing) throw new Error('You already have an active visit.');\n\n    await prisma.visit.create({\n        data: {\n            caregiverId: user.id,\n            clientId,\n            organizationId: user.organizationId,\n            serviceType,\n            startDateTime: new Date(),\n            startLatitude: lat,\n            startLongitude: lng,\n            status: 'IN_PROGRESS'\n        }\n    });\n\n    revalidatePath('/dashboard/evv');\n    return { success: true };\n}\n\nexport async function endVisit(visitId: string, lat: number, lng: number, notes?: string, signature?: string) {\n    const user = await getCurrentUser();\n    if (!user) throw new Error('Unauthorized');\n\n    const visit = await prisma.visit.findUnique({\n        where: { id: visitId }\n    });\n\n    if (!visit || visit.caregiverId !== user.id) throw new Error('Visit not found or unauthorized');\n    if (visit.status !== 'IN_PROGRESS') throw new Error('Visit is not in progress');\n\n    const updatedVisit = await prisma.visit.update({\n        where: { id: visitId },\n        data: {\n            endDateTime: new Date(),\n            endLatitude: lat,\n            endLongitude: lng,\n            notes,\n            clientSignature: signature,\n            status: 'COMPLETED'\n        },\n        include: { client: true, caregiver: true }\n    });\n\n    // Attempt Auto-Sync if configured\n    try {\n        const config = await (prisma as any).sandataConfig.findUnique({\n            where: { organizationId: user.organizationId }\n        });\n\n        if (config) {\n            const syncResult = await pushToSandata(updatedVisit, config);\n            if (syncResult.success) {\n                await prisma.visit.update({\n                    where: { id: visitId },\n                    data: {\n                        status: 'SUBMITTED',\n                        sandataTransactionId: syncResult.transactionId\n                    }\n                });\n            }\n        }\n    } catch (e) {\n        console.error('Auto-sync failed:', e);\n        // Visit remains COMPLETED, can be synced manually later\n    }\n\n    revalidatePath('/dashboard/evv');\n    return { success: true };\n}\n\nexport async function getVisitHistory() {\n    const user = await getCurrentUser();\n    if (!user || !user.organizationId) return [];\n\n    return await prisma.visit.findMany({\n        where: { organizationId: user.organizationId as string }, // Admins see all, caregivers might only see theirs? For now admin view.\n        include: {\n            caregiver: true,\n            client: true\n        },\n        orderBy: { startDateTime: 'desc' },\n        take: 50\n    });\n}\n\nexport async function getSandataConfig() {\n    const user = await getCurrentUser();\n    if (!user || !user.organizationId) return null;\n\n    return await (prisma as any).sandataConfig.findUnique({\n        where: { organizationId: user.organizationId }\n    });\n}\n\nexport async function saveSandataConfig(formData: FormData) {\n    const user = await getCurrentUser();\n    if (user.role !== 'ADMIN') throw new Error('Unauthorized');\n    if (!user.organizationId) throw new Error('No Organization');\n\n    const agencyId = formData.get('agencyId') as string;\n    const username = formData.get('username') as string;\n    const password = formData.get('password') as string;\n    const providerId = formData.get('providerId') as string;\n    const environment = formData.get('environment') as string;\n\n    const existing = await (prisma as any).sandataConfig.findUnique({\n        where: { organizationId: user.organizationId }\n    });\n\n    if (existing) {\n        await (prisma as any).sandataConfig.update({\n            where: { id: existing.id },\n            data: { agencyId, username, password, providerId, environment }\n        });\n    } else {\n        await (prisma as any).sandataConfig.create({\n            data: {\n                organizationId: user.organizationId,\n                agencyId, username, password, providerId, environment\n            }\n        });\n    }\n\n    revalidatePath('/dashboard/evv');\n    return { success: true };\n}\n\nexport async function scheduleVisit(clientId: string, caregiverId: string, start: Date, end: Date, serviceType: string) {\n    const user = await getCurrentUser();\n    if (!user || !user.organizationId) throw new Error('Unauthorized');\n\n    // Basic Matchmaking: Overlap Check\n    const overlapping = await prisma.visit.findFirst({\n        where: {\n            caregiverId,\n            status: { in: ['SCHEDULED', 'IN_PROGRESS', 'COMPLETED', 'VERIFIED'] },\n            AND: [\n                { startDateTime: { lt: end } },\n                { endDateTime: { gt: start } }\n            ]\n        }\n    });\n\n    if (overlapping) {\n        throw new Error(`Caregiver is already booked for an overlapping visit during this time.`);\n    }\n\n    await prisma.visit.create({\n        data: {\n            organizationId: user.organizationId,\n            clientId,\n            caregiverId,\n            startDateTime: start,\n            endDateTime: end,\n            serviceType,\n            status: 'SCHEDULED'\n        }\n    });\n\n    revalidatePath('/dashboard/evv');\n    return { success: true };\n}\n\nexport async function manualSync(visitId: string) {\n    const user = await getCurrentUser();\n\n    // Authorization check\n\n    const visit = await prisma.visit.findUnique({\n        where: { id: visitId },\n        include: { client: true, caregiver: true }\n    });\n\n    if (!visit || !visit.organizationId) return { error: 'Invalid visit' };\n\n    const config = await (prisma as any).sandataConfig.findUnique({\n        where: { organizationId: visit.organizationId }\n    });\n\n    if (!config) return { error: 'Sandata not configured' };\n\n    const syncResult = await pushToSandata(visit, config);\n    if (syncResult.success) {\n        await prisma.visit.update({\n            where: { id: visitId },\n            data: {\n                status: 'SUBMITTED',\n                sandataTransactionId: syncResult.transactionId\n            }\n        });\n        revalidatePath('/dashboard/evv');\n        return { success: true };\n    }\n\n    return { error: 'Sync failed' };\n\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/lib/actions/forms.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/lib/actions/payroll.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/lib/actions/settings.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[458,461],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[458,461],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":30,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[813,816],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[813,816],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":47,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1266,1269],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1266,1269],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":63,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1715,1718],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1715,1718],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use server';\n\nimport { prisma } from '@/lib/db';\nimport { revalidatePath } from 'next/cache';\n\nexport async function getModuleConfigAction(organizationId: string) {\n    try {\n        const data = await prisma.moduleConfig.findUnique({\n            where: { organizationId }\n        });\n        return { data };\n    } catch {\n        return { error: 'Failed to fetch module config' };\n    }\n}\n\nexport async function updateModuleConfigAction(id: string, data: any) {\n    try {\n        const updated = await prisma.moduleConfig.update({\n            where: { id },\n            data,\n        });\n        revalidatePath('/dashboard');\n        return { data: updated };\n    } catch {\n        return { error: 'Failed to update module config' };\n    }\n}\n\nexport async function saveEmailAccountAction(userId: string, data: any) {\n    try {\n        const account = await prisma.emailAccount.upsert({\n            where: { userId },\n            update: data,\n            create: {\n                ...data,\n                userId\n            }\n        });\n        revalidatePath('/dashboard/email');\n        return { data: account };\n    } catch {\n        return { error: 'Failed to save email account' };\n    }\n}\n\nexport async function saveSipAccountAction(userId: string, data: any) {\n    try {\n        const account = await prisma.sipAccount.upsert({\n            where: { userId },\n            update: data,\n            create: {\n                ...data,\n                userId\n            }\n        });\n        revalidatePath('/dashboard/phone');\n        return { data: account };\n    } catch {\n        return { error: 'Failed to save SIP account' };\n    }\n}\nexport async function saveSRFaxConfigAction(userId: string, data: any) {\n    try {\n        const config = await prisma.sRFaxConfig.upsert({\n            where: { userId },\n            update: data,\n            create: {\n                ...data,\n                userId\n            }\n        });\n        revalidatePath('/dashboard/fax');\n        return { data: config };\n    } catch {\n        return { error: 'Failed to save SRFax configuration' };\n    }\n}\n\nexport async function saveDashboardLayoutAction(organizationId: string, layout: string) {\n    try {\n        await prisma.moduleConfig.update({\n            where: { organizationId },\n            data: { dashboardLayout: layout }\n        });\n        revalidatePath('/dashboard');\n        return { success: true };\n    } catch {\n        return { error: 'Failed to save dashboard layout' };\n    }\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/lib/auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/lib/contexts/SipContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":95,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":98,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[883,886],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[883,886],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { UserAgent, SessionState, Inviter, Registerer, Invitation } from 'sip.js';\n\ninterface SipState {\n    status: 'DISCONNECTED' | 'CONNECTED' | 'REGISTERING' | 'ERROR';\n    activeCall: boolean;\n    invitation: Invitation | null;\n    callDetails: {\n        number: string;\n        duration: number;\n        direction: 'INBOUND' | 'OUTBOUND';\n        status: 'RINGING' | 'CONNECTED' | 'HELD' | 'IDLE';\n    } | null;\n}\n\ninterface SipContextType {\n    state: SipState;\n    makeCall: (number: string) => void;\n    endCall: () => void;\n    answerCall: () => void;\n    rejectCall: () => void;\n    toggleHold: () => void;\n}\n\nconst SipContext = createContext<SipContextType | undefined>(undefined);\n\nexport function SipProvider({ children, sipConfig }: { children: React.ReactNode; sipConfig?: any }) {\n    const [state, setState] = useState<SipState>({\n        status: 'DISCONNECTED',\n        activeCall: false,\n        invitation: null,\n        callDetails: null,\n    });\n    const [ua, setUa] = useState<UserAgent | null>(null);\n\n    useEffect(() => {\n        if (sipConfig && sipConfig.websocketUrl && sipConfig.username) {\n            // Using a functional update or moved outside might fix the lint, \n            // but for now we just want logic correctness.\n            // avoiding direct setState if possible or acknowledge it.\n\n            let userAgent: UserAgent;\n\n            const setupSip = async () => {\n                setState(s => ({ ...s, status: 'REGISTERING' }));\n                try {\n                    userAgent = new UserAgent({\n                        uri: UserAgent.makeURI(`sip:${sipConfig.username}@${sipConfig.domain}`),\n                        transportOptions: {\n                            server: sipConfig.websocketUrl\n                        },\n                        authorizationUsername: sipConfig.username,\n                        authorizationPassword: sipConfig.password,\n                        delegate: {\n                            onConnect: () => {\n                                setState(s => ({ ...s, status: 'CONNECTED' }));\n                            },\n                            onDisconnect: (error) => {\n                                setState(s => ({ ...s, status: 'DISCONNECTED' }));\n                                if (error) console.error('SIP Disconnected:', error);\n                            },\n                            onInvite: (invitation) => {\n                                console.log('Incoming call:', invitation);\n                                setState(prev => ({\n                                    ...prev,\n                                    activeCall: true,\n                                    invitation: invitation,\n                                    callDetails: {\n                                        number: invitation.remoteIdentity.uri.user || 'Unknown',\n                                        duration: 0,\n                                        direction: 'INBOUND',\n                                        status: 'RINGING'\n                                    }\n                                }));\n\n                                // Handle invitation state changes (e.g. if caller cancels)\n                                invitation.stateChange.addListener((state) => {\n                                    if (state === SessionState.Terminated) {\n                                        setState(prev => ({\n                                            ...prev,\n                                            activeCall: false,\n                                            invitation: null,\n                                            callDetails: null\n                                        }));\n                                    }\n                                });\n                            }\n                        }\n                    });\n\n                    await userAgent.start();\n                    setUa(userAgent);\n\n                    // Register\n                    const registerer = new Registerer(userAgent);\n                    await registerer.register();\n\n                } catch (e) {\n                    console.error(\"SIP Setup Error:\", e);\n                    setState(s => ({ ...s, status: 'ERROR' }));\n                }\n            };\n\n            setupSip();\n\n            return () => {\n                if (userAgent) {\n                    userAgent.stop();\n                }\n            };\n        }\n    }, [sipConfig]);\n\n    const makeCall = async (number: string) => {\n        if (!ua || state.status !== 'CONNECTED') {\n            console.error('SIP User Agent not ready');\n            alert(\"SIP not connected. Please check your settings.\");\n            return;\n        }\n\n        const target = UserAgent.makeURI(`sip:${number}@${sipConfig.domain}`);\n        if (!target) return;\n\n        const inviter = new Inviter(ua, target);\n\n        inviter.stateChange.addListener((newState: SessionState) => {\n            if (newState === SessionState.Established) {\n                setState((prev: SipState) => ({\n                    ...prev,\n                    activeCall: true,\n                    callDetails: { number, duration: 0, direction: 'OUTBOUND', status: 'CONNECTED' }\n                }));\n            } else if (newState === SessionState.Terminated) {\n                endCall();\n            }\n        });\n\n        await inviter.invite();\n    };\n\n    const endCall = () => {\n        setState((prev: SipState) => ({\n            ...prev,\n            activeCall: false,\n            callDetails: null\n        }));\n    };\n\n    const answerCall = () => {\n        if (state.invitation && state.callDetails?.status === 'RINGING') {\n            state.invitation.accept();\n            setState(prev => ({\n                ...prev,\n                callDetails: {\n                    ...prev.callDetails!,\n                    status: 'CONNECTED',\n                    duration: 0\n                }\n            }));\n        } else {\n            // Fallback for demo if no real invitation object\n            if (state.callDetails?.status === 'RINGING') {\n                setState(prev => ({\n                    ...prev,\n                    callDetails: {\n                        ...prev.callDetails!,\n                        status: 'CONNECTED',\n                        duration: 0\n                    }\n                }));\n            }\n        }\n    };\n\n    const rejectCall = () => {\n        if (state.invitation) {\n            state.invitation.reject();\n        }\n        endCall();\n    };\n\n    const toggleHold = () => {\n        if (state.callDetails) {\n            setState((prev: SipState) => ({\n                ...prev,\n                callDetails: {\n                    ...prev.callDetails!,\n                    status: prev.callDetails!.status === 'HELD' ? 'CONNECTED' : 'HELD'\n                }\n            }));\n        }\n    };\n\n    return (\n        <SipContext.Provider value={{ state, makeCall, endCall, answerCall, rejectCall, toggleHold }}>\n            {children}\n        </SipContext.Provider>\n    );\n}\n\nexport const useSip = () => {\n    const context = useContext(SipContext);\n    if (context === undefined) {\n        throw new Error('useSip must be used within a SipProvider');\n    }\n    return context;\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/lib/contexts/ThemeContext.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/xibalbasolutions/NextivaClone/src/lib/contexts/ThemeContext.tsx:20:13\n  18 |         const savedTheme = localStorage.getItem('theme') as Theme;\n  19 |         if (savedTheme) {\n> 20 |             setTheme(savedTheme);\n     |             ^^^^^^^^ Avoid calling setState() directly within an effect\n  21 |             document.documentElement.setAttribute('data-theme', savedTheme);\n  22 |         } else {\n  23 |             // Check system preference","line":20,"column":13,"nodeType":null,"endLine":20,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { createContext, useContext, useEffect, useState } from 'react';\n\ntype Theme = 'dark' | 'light';\n\ninterface ThemeContextType {\n    theme: Theme;\n    toggleTheme: () => void;\n}\n\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\n\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\n    const [theme, setTheme] = useState<Theme>('dark'); // Default to dark\n\n    useEffect(() => {\n        const savedTheme = localStorage.getItem('theme') as Theme;\n        if (savedTheme) {\n            setTheme(savedTheme);\n            document.documentElement.setAttribute('data-theme', savedTheme);\n        } else {\n            // Check system preference\n            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {\n                setTheme('light');\n                document.documentElement.setAttribute('data-theme', 'light');\n            }\n        }\n    }, []);\n\n    const toggleTheme = () => {\n        const newTheme = theme === 'dark' ? 'light' : 'dark';\n        setTheme(newTheme);\n        localStorage.setItem('theme', newTheme);\n        document.documentElement.setAttribute('data-theme', newTheme);\n    };\n\n    return (\n        <ThemeContext.Provider value={{ theme, toggleTheme }}>\n            {children}\n        </ThemeContext.Provider>\n    );\n}\n\nexport function useTheme() {\n    const context = useContext(ThemeContext);\n    if (context === undefined) {\n        throw new Error('useTheme must be used within a ThemeProvider');\n    }\n    return context;\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/lib/db.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BetterSqlite3' is defined but never used.","line":3,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[389,392],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[389,392],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { PrismaClient } from \"@prisma/client\";\nimport { PrismaBetterSqlite3 } from \"@prisma/adapter-better-sqlite3\";\nimport BetterSqlite3 from \"better-sqlite3\";\nimport path from \"path\";\n\nconst globalForPrisma = global as unknown as { prisma: PrismaClient };\n\nconst dbPath = path.resolve(process.cwd(), \"prisma/dev.db\");\nconst adapter = new PrismaBetterSqlite3({ url: `file:${dbPath}` } as any);\n\nexport const prisma =\n    globalForPrisma.prisma ||\n    new PrismaClient({\n        adapter,\n        log: [\"query\"],\n    });\n\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma;\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/src/lib/fax.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/tests/e2e/crm.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/tests/e2e/email.spec.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'emails' is assigned a value but never used.","line":21,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { test, expect } from '@playwright/test';\n\ntest.describe('Email Module', () => {\n    test.beforeEach(async ({ page }) => {\n        await page.goto('/dashboard/email');\n    });\n\n    test('should display Email Suite header', async ({ page }) => {\n        await expect(page.locator('h1')).toContainText('Email Business Suite');\n    });\n\n    test('should display emails in inbox or configure message', async ({ page }) => {\n        const inboxList = page.getByTestId('email-list');\n        await expect(inboxList).toBeVisible();\n\n        // Since it might be empty if no account is configured\n        const content = await inboxList.textContent();\n        if (content?.includes('No active email account')) {\n            await expect(inboxList).toContainText('Please go to settings');\n        } else {\n            const emails = inboxList.locator('.glass-hover');\n            // Assuming at least one email or loading state\n            await expect(inboxList).not.toBeEmpty();\n        }\n    });\n\n    test('should display email content when selected', async ({ page }) => {\n        await page.getByTestId('email-item-2').click();\n\n        const messageView = page.getByTestId('email-message-view');\n        await expect(messageView.locator('h2')).toContainText('Q4 Targets');\n        // Use a more specific selector for the body content\n        await expect(messageView).toContainText('Please review the attached targets for Q4...');\n    });\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/tests/e2e/fax.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/tests/e2e/phone.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/tests/e2e/settings.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xibalbasolutions/NextivaClone/tests/e2e/storage.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
